define("famous/core/Entity",["require","exports","module"],function(t,i,e){var n=[];function s(t){return n[t]}function r(t,i){n[t]=i}function o(t){var i=n.length;r(i,t);return i}function a(t){r(t,null)}e.exports={register:o,unregister:a,get:s,set:r}});define("famous/core/Transform",["require","exports","module"],function(t,i,e){var n={};n.precision=1e-6;n.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n.multiply4x4=function a(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15]]};n.multiply=function h(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2],t[1]*i[0]+t[5]*i[1]+t[9]*i[2],t[2]*i[0]+t[6]*i[1]+t[10]*i[2],0,t[0]*i[4]+t[4]*i[5]+t[8]*i[6],t[1]*i[4]+t[5]*i[5]+t[9]*i[6],t[2]*i[4]+t[6]*i[5]+t[10]*i[6],0,t[0]*i[8]+t[4]*i[9]+t[8]*i[10],t[1]*i[8]+t[5]*i[9]+t[9]*i[10],t[2]*i[8]+t[6]*i[9]+t[10]*i[10],0,t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],1]};n.thenMove=function u(t,i){if(!i[2])i[2]=0;return[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]};n.moveThen=function c(t,i){if(!t[2])t[2]=0;var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8];var s=t[0]*i[1]+t[1]*i[5]+t[2]*i[9];var r=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return n.thenMove(i,[e,s,r])};n.translate=function p(t,i,e){if(e===undefined)e=0;return[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]};n.thenScale=function l(t,i){return[i[0]*t[0],i[1]*t[1],i[2]*t[2],0,i[0]*t[4],i[1]*t[5],i[2]*t[6],0,i[0]*t[8],i[1]*t[9],i[2]*t[10],0,i[0]*t[12],i[1]*t[13],i[2]*t[14],1]};n.scale=function f(t,i,e){if(e===undefined)e=1;return[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]};n.rotateX=function d(t){var i=Math.cos(t);var e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]};n.rotateY=function v(t){var i=Math.cos(t);var e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]};n.rotateZ=function _(t){var i=Math.cos(t);var e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]};n.rotate=function y(t,i,e){var n=Math.cos(t);var s=Math.sin(t);var r=Math.cos(i);var o=Math.sin(i);var a=Math.cos(e);var h=Math.sin(e);var u=[r*a,n*h+s*o*a,s*h-n*o*a,0,-r*h,n*a-s*o*h,s*a+n*o*h,0,o,-s*r,n*r,0,0,0,0,1];return u};n.rotateAxis=function g(t,i){var e=Math.sin(i);var n=Math.cos(i);var s=1-n;var r=t[0]*t[0]*s;var o=t[0]*t[1]*s;var a=t[0]*t[2]*s;var h=t[1]*t[1]*s;var u=t[1]*t[2]*s;var c=t[2]*t[2]*s;var p=t[0]*e;var l=t[1]*e;var f=t[2]*e;var d=[r+n,o+f,a-l,0,o-f,h+n,u+p,0,a+l,u-p,c+n,0,0,0,0,1];return d};n.aboutOrigin=function m(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]);var s=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]);var r=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return n.thenMove(i,[e,s,r])};n.skew=function O(t,i,e){return[1,0,0,0,Math.tan(e),1,0,0,Math.tan(i),Math.tan(t),1,0,0,0,0,1]};n.skewX=function S(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]};n.skewY=function T(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]};n.perspective=function x(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]};n.getTranslate=function w(t){return[t[12],t[13],t[14]]};n.inverse=function E(t){var i=t[5]*t[10]-t[6]*t[9];var e=t[4]*t[10]-t[6]*t[8];var n=t[4]*t[9]-t[5]*t[8];var s=t[1]*t[10]-t[2]*t[9];var r=t[0]*t[10]-t[2]*t[8];var o=t[0]*t[9]-t[1]*t[8];var a=t[1]*t[6]-t[2]*t[5];var h=t[0]*t[6]-t[2]*t[4];var u=t[0]*t[5]-t[1]*t[4];var c=t[0]*i-t[1]*e+t[2]*n;var p=1/c;var l=[p*i,-p*s,p*a,0,-p*e,p*r,-p*h,0,p*n,-p*o,p*u,0,0,0,0,1];l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8];l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9];l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10];return l};n.transpose=function b(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]};function s(t){return t.length===2?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function r(t){return Math.sqrt(s(t))}function o(t){return t<0?-1:1}n.interpret=function z(t){var i=[t[0],t[1],t[2]];var e=o(i[0]);var a=r(i);var h=[i[0]+e*a,i[1],i[2]];var u=2/s(h);if(u>=Infinity){return{translate:n.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]}}var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-u*h[0]*h[0];c[5]=1-u*h[1]*h[1];c[10]=1-u*h[2]*h[2];c[1]=-u*h[0]*h[1];c[2]=-u*h[0]*h[2];c[6]=-u*h[1]*h[2];c[4]=c[1];c[8]=c[2];c[9]=c[6];var p=n.multiply(c,t);var l=[p[5],p[6]];var f=o(l[0]);var d=r(l);var v=[l[0]+f*d,l[1]];var _=2/s(v);var y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-_*v[0]*v[0];y[10]=1-_*v[1]*v[1];y[6]=-_*v[0]*v[1];y[9]=y[6];var g=n.multiply(y,c);var m=n.multiply(g,t);var O=n.scale(m[0]<0?-1:1,m[5]<0?-1:1,m[10]<0?-1:1);m=n.multiply(m,O);g=n.multiply(O,g);var S={};S.translate=n.getTranslate(t);S.rotate=[Math.atan2(-g[6],g[10]),Math.asin(g[2]),Math.atan2(-g[1],g[0])];if(!S.rotate[0]){S.rotate[0]=0;S.rotate[2]=Math.atan2(g[4],g[5])}S.scale=[m[0],m[5],m[10]];S.skew=[Math.atan2(m[9],S.scale[2]),Math.atan2(m[8],S.scale[2]),Math.atan2(m[4],S.scale[0])];if(Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI){S.rotate[1]=Math.PI-S.rotate[1];if(S.rotate[1]>Math.PI)S.rotate[1]-=2*Math.PI;if(S.rotate[1]<-Math.PI)S.rotate[1]+=2*Math.PI;if(S.rotate[0]<0)S.rotate[0]+=Math.PI;else S.rotate[0]-=Math.PI;if(S.rotate[2]<0)S.rotate[2]+=Math.PI;else S.rotate[2]-=Math.PI}return S};n.average=function M(t,i,e){e=e===undefined?.5:e;var s=n.interpret(t);var r=n.interpret(i);var o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};for(var a=0;a<3;a++){o.translate[a]=(1-e)*s.translate[a]+e*r.translate[a];o.rotate[a]=(1-e)*s.rotate[a]+e*r.rotate[a];o.scale[a]=(1-e)*s.scale[a]+e*r.scale[a];o.skew[a]=(1-e)*s.skew[a]+e*r.skew[a]}return n.build(o)};n.build=function P(t){var i=n.scale(t.scale[0],t.scale[1],t.scale[2]);var e=n.skew(t.skew[0],t.skew[1],t.skew[2]);var s=n.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return n.thenMove(n.multiply(n.multiply(s,e),i),t.translate)};n.equals=function I(t,i){return!n.notEquals(t,i)};n.notEquals=function C(t,i){if(t===i)return false;return!(t&&i)||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]};n.normalizeRotation=function F(t){var i=t.slice(0);if(i[0]===Math.PI*.5||i[0]===-Math.PI*.5){i[0]=-i[0];i[1]=Math.PI-i[1];i[2]-=Math.PI}if(i[0]>Math.PI*.5){i[0]=i[0]-Math.PI;i[1]=Math.PI-i[1];i[2]-=Math.PI}if(i[0]<-Math.PI*.5){i[0]=i[0]+Math.PI;i[1]=-Math.PI-i[1];i[2]-=Math.PI}while(i[1]<-Math.PI)i[1]+=2*Math.PI;while(i[1]>=Math.PI)i[1]-=2*Math.PI;while(i[2]<-Math.PI)i[2]+=2*Math.PI;while(i[2]>=Math.PI)i[2]-=2*Math.PI;return i};n.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1];n.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1];e.exports=n});define("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,i,e){var n=t("./Transform");function s(){this.result={}}s._instance=new s;s.parse=function a(t,i){return s._instance.parse(t,i)};s.prototype.parse=function h(t,i){this.reset();this._parseSpec(t,i,n.identity);return this.result};s.prototype.reset=function u(){this.result={}};function r(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var o=[0,0];s.prototype._parseSpec=function c(t,i,e){var s;var a;var h;var u;var c;var p;var l;if(typeof t==="number"){s=t;h=i.transform;p=i.align||i.origin;if(i.size&&p&&(p[0]||p[1])){var f=[p[0]*i.size[0],p[1]*i.size[1],0];h=n.thenMove(h,r(f,e))}this.result[s]={transform:h,opacity:i.opacity,origin:i.origin||o,align:i.align||i.origin||o,size:i.size}}else if(!t){return}else if(t instanceof Array){for(var d=0;d<t.length;d++){this._parseSpec(t[d],i,e)}}else{a=t.target;h=i.transform;u=i.opacity;c=i.origin;p=i.align;l=i.size;var v=e;if(t.opacity!==undefined)u=i.opacity*t.opacity;if(t.transform)h=n.multiply(i.transform,t.transform);if(t.origin){c=t.origin;v=i.transform}if(t.align)p=t.align;if(t.size){var _=i.size;l=[t.size[0]!==undefined?t.size[0]:_[0],t.size[1]!==undefined?t.size[1]:_[1]];if(_){if(!p)p=c;if(p&&(p[0]||p[1]))h=n.thenMove(h,r([p[0]*_[0],p[1]*_[1],0],e));if(c&&(c[0]||c[1]))h=n.moveThen([-c[0]*l[0],-c[1]*l[1],0],h)}v=i.transform;c=null;p=null}this._parseSpec(a,{transform:h,opacity:u,origin:c,align:p,size:l},v)}};e.exports=s});define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,i,e){var n=t("./Entity");var s=t("./SpecParser");function r(t){this._object=null;this._child=null;this._hasMultipleChildren=false;this._isRenderable=false;this._isModifier=false;this._resultCache={};this._prevResults={};this._childResult=null;if(t)this.set(t)}r.prototype.add=function a(t){var i=t instanceof r?t:new r(t);if(this._child instanceof Array)this._child.push(i);else if(this._child){this._child=[this._child,i];this._hasMultipleChildren=true;this._childResult=[]}else this._child=i;return i};r.prototype.get=function h(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)};r.prototype.set=function u(t){this._childResult=null;this._hasMultipleChildren=false;this._isRenderable=t.render?true:false;this._isModifier=t.modify?true:false;this._object=t;this._child=null;if(t instanceof r)return t;else return this};r.prototype.getSize=function c(){var t=null;var i=this.get();if(i&&i.getSize)t=i.getSize();if(!t&&this._child&&this._child.getSize)t=this._child.getSize();return t};function o(t,i,e){var r=s.parse(t,i);var a=Object.keys(r);for(var h=0;h<a.length;h++){var u=a[h];var c=n.get(u);var p=r[u];p.allocator=i.allocator;var l=c.commit(p);if(l)o(l,i,e);else e[u]=p}}r.prototype.commit=function p(t){var i=Object.keys(this._prevResults);for(var e=0;e<i.length;e++){var s=i[e];if(this._resultCache[s]===undefined){var r=n.get(s);if(r.cleanup)r.cleanup(t.allocator)}}this._prevResults=this._resultCache;this._resultCache={};o(this.render(),t,this._resultCache)};r.prototype.render=function l(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;var i=this._child;for(var e=0;e<i.length;e++){t[e]=i[e].render()}}else if(this._child)t=this._child.render();return this._isModifier?this._object.modify(t):t};e.exports=r});define("famous/core/EventEmitter",["require","exports","module"],function(t,i,e){function n(){this.listeners={};this._owner=this}n.prototype.emit=function s(t,i){var e=this.listeners[t];if(e){for(var n=0;n<e.length;n++){e[n].call(this._owner,i)}}return this};n.prototype.on=function r(t,i){if(!(t in this.listeners))this.listeners[t]=[];var e=this.listeners[t].indexOf(i);if(e<0)this.listeners[t].push(i);return this};n.prototype.addListener=n.prototype.on;n.prototype.removeListener=function o(t,i){var e=this.listeners[t].indexOf(i);if(e>=0)this.listeners[t].splice(e,1);return this};n.prototype.bindThis=function a(t){this._owner=t};e.exports=n});define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,i,e){var n=t("./EventEmitter");function s(){n.apply(this,arguments);this.downstream=[];this.downstreamFn=[];this.upstream=[];this.upstreamListeners={}}s.prototype=Object.create(n.prototype);s.prototype.constructor=s;s.setInputHandler=function r(t,i){t.trigger=i.trigger.bind(i);if(i.subscribe&&i.unsubscribe){t.subscribe=i.subscribe.bind(i);t.unsubscribe=i.unsubscribe.bind(i)}};s.setOutputHandler=function o(t,i){if(i instanceof s)i.bindThis(t);t.pipe=i.pipe.bind(i);t.unpipe=i.unpipe.bind(i);t.on=i.on.bind(i);t.addListener=t.on;t.removeListener=i.removeListener.bind(i)};s.prototype.emit=function a(t,i){n.prototype.emit.apply(this,arguments);var e=0;for(e=0;e<this.downstream.length;e++){if(this.downstream[e].trigger)this.downstream[e].trigger(t,i)}for(e=0;e<this.downstreamFn.length;e++){this.downstreamFn[e](t,i)}return this};s.prototype.trigger=s.prototype.emit;s.prototype.pipe=function h(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream;var e=i.indexOf(t);if(e<0)i.push(t);if(t instanceof Function)t("pipe",null);else if(t.trigger)t.trigger("pipe",null);return t};s.prototype.unpipe=function u(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream;var e=i.indexOf(t);if(e>=0){i.splice(e,1);if(t instanceof Function)t("unpipe",null);else if(t.trigger)t.trigger("unpipe",null);return t}else return false};s.prototype.on=function c(t,i){n.prototype.on.apply(this,arguments);if(!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var s=0;s<this.upstream.length;s++){this.upstream[s].on(t,e)}}return this};s.prototype.addListener=s.prototype.on;s.prototype.subscribe=function p(t){var i=this.upstream.indexOf(t);if(i<0){this.upstream.push(t);for(var e in this.upstreamListeners){t.on(e,this.upstreamListeners[e])}}return this};s.prototype.unsubscribe=function l(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners){t.removeListener(e,this.upstreamListeners[e])}}return this};e.exports=s});define("famous/core/ElementAllocator",["require","exports","module"],function(t,i,e){function n(t){if(!t)t=document.createDocumentFragment();this.container=t;this.detachedNodes={};this.nodeCount=0}n.prototype.migrate=function s(t){var i=this.container;if(t===i)return;if(i instanceof DocumentFragment){t.appendChild(i)}else{while(i.hasChildNodes()){t.appendChild(i.removeChild(i.firstChild))}}this.container=t};n.prototype.allocate=function r(t){t=t.toLowerCase();if(!(t in this.detachedNodes))this.detachedNodes[t]=[];var i=this.detachedNodes[t];var e;if(i.length>0){e=i.pop()}else{e=document.createElement(t);this.container.appendChild(e)}this.nodeCount++;return e};n.prototype.deallocate=function o(t){var i=t.nodeName.toLowerCase();var e=this.detachedNodes[i];e.push(t);this.nodeCount--};n.prototype.getNodeCount=function a(){return this.nodeCount};e.exports=n});define("famous/utilities/Utility",["require","exports","module"],function(t,i,e){var n={};n.Direction={X:0,Y:1,Z:2};n.after=function s(t,i){var e=t;return function(){e--;if(e===0)i.apply(this,arguments)}};n.loadURL=function r(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function n(){if(this.readyState===4){if(i)i(this.responseText)}};e.open("GET",t);e.send()};n.createDocumentFragmentFromHTML=function o(t){var i=document.createElement("div");i.innerHTML=t;var e=document.createDocumentFragment();while(i.hasChildNodes())e.appendChild(i.firstChild);return e};e.exports=n});define("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,i,e){var n=t("famous/utilities/Utility");function s(t){this.method=t;this._instances=[];this.state=[]}s.SUPPORTS_MULTIPLE=true;s.prototype.get=function r(){for(var t=0;t<this._instances.length;t++){this.state[t]=this._instances[t].get()}return this.state};s.prototype.set=function o(t,i,e){var s=n.after(t.length,e);for(var r=0;r<t.length;r++){if(!this._instances[r])this._instances[r]=new this.method;this._instances[r].set(t[r],i,s)}};s.prototype.reset=function a(t){for(var i=0;i<t.length;i++){if(!this._instances[i])this._instances[i]=new this.method;this._instances[i].reset(t[i])}};e.exports=s});define("famous/transitions/TweenTransition",["require","exports","module"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS);if(t)this.setOptions(t);this._startTime=0;this._startValue=0;this._updateTime=0;this._endValue=0;this._curve=undefined;this._duration=0;this._active=false;this._callback=undefined;this.state=0;this.velocity=undefined}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){if(t<=.5)return 2*t*t;else return-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}};n.SUPPORTS_MULTIPLE=true;n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var s={};n.registerCurve=function c(t,i){if(!s[t]){s[t]=i;return true}else{return false}};n.unregisterCurve=function p(t){if(s[t]){delete s[t];return true}else{return false}};n.getCurve=function l(t){var i=s[t];if(i!==undefined)return i;else throw new Error("curve not registered")};n.getCurves=function f(){return s};function r(t,i,e){return(1-e)*t+e*i}function o(t){if(t instanceof Object){if(t instanceof Array)return t.slice(0);else return Object.create(t)}else return t}function a(t,i){var e={curve:i.curve};if(i.duration)e.duration=i.duration;if(i.speed)e.speed=i.speed;if(t instanceof Object){if(t.duration!==undefined)e.duration=t.duration;if(t.curve)e.curve=t.curve;if(t.speed)e.speed=t.speed}if(typeof e.curve==="string")e.curve=n.getCurve(e.curve);return e}n.prototype.setOptions=function d(t){if(t.curve!==undefined)this.options.curve=t.curve;if(t.duration!==undefined)this.options.duration=t.duration;if(t.speed!==undefined)this.options.speed=t.speed};n.prototype.set=function v(t,i,e){if(!i){this.reset(t);if(e)e();return}this._startValue=o(this.get());i=a(i,this.options);if(i.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var r in n)s+=(t[r]-n[r])*(t[r]-n[r]);i.duration=Math.sqrt(s)/i.speed}else{i.duration=Math.abs(t-n)/i.speed}}this._startTime=Date.now();this._endValue=o(t);this._startVelocity=o(i.velocity);this._duration=i.duration;this._curve=i.curve;this._active=true;this._callback=e};n.prototype.reset=function _(t,i){if(this._callback){var e=this._callback;this._callback=undefined;e()}this.state=o(t);this.velocity=o(i);this._startTime=0;this._duration=0;this._updateTime=0;this._startValue=this.state;this._startVelocity=this.velocity;this._endValue=this.state;this._active=false};n.prototype.getVelocity=function y(){return this.velocity};n.prototype.get=function g(t){this.update(t);return this.state};function h(t,i,e,n,s){var r;var o=1e-7;var a=(e(s)-e(s-o))/o;if(t instanceof Array){r=[];for(var h=0;h<t.length;h++){if(typeof t[h]==="number")r[h]=a*(t[h]-i[h])/n;else r[h]=0}}else r=a*(t-i)/n;return r}function u(t,i,e){var n;if(t instanceof Array){n=[];for(var s=0;s<t.length;s++){if(typeof t[s]==="number")n[s]=r(t[s],i[s],e);else n[s]=t[s]}}else n=r(t,i,e);return n}n.prototype.update=function m(t){if(!this._active){if(this._callback){var i=this._callback;this._callback=undefined;i()}return}if(!t)t=Date.now();if(this._updateTime>=t)return;this._updateTime=t;var e=t-this._startTime;if(e>=this._duration){this.state=this._endValue;this.velocity=h(this.state,this._startValue,this._curve,this._duration,1);this._active=false}else if(e<0){this.state=this._startValue;this.velocity=this._startVelocity}else{var n=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(n));this.velocity=h(this.state,this._startValue,this._curve,this._duration,n)}};n.prototype.isActive=function O(){return this._active};n.prototype.halt=function S(){this.reset(this.get())};n.registerCurve("linear",n.Curves.linear);n.registerCurve("easeIn",n.Curves.easeIn);n.registerCurve("easeOut",n.Curves.easeOut);n.registerCurve("easeInOut",n.Curves.easeInOut);n.registerCurve("easeOutBounce",n.Curves.easeOutBounce);n.registerCurve("spring",n.Curves.spring);n.customCurve=function T(t,i){t=t||0;i=i||0;return function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}};e.exports=n});define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,i,e){var n=t("./MultipleTransition");var s=t("./TweenTransition");function r(t){this.currentAction=null;this.actionQueue=[];this.callbackQueue=[];this.state=0;this.velocity=undefined;this._callback=undefined;this._engineInstance=null;this._currentMethod=null;this.set(t)}var o={};r.registerMethod=function h(t,i){if(!(t in o)){o[t]=i;return true}else return false};r.unregisterMethod=function u(t){if(t in o){delete o[t];return true}else return false};function a(){if(this._callback){var t=this._callback;this._callback=undefined;t()}if(this.actionQueue.length<=0){this.set(this.get());return}this.currentAction=this.actionQueue.shift();this._callback=this.callbackQueue.shift();var i=null;var e=this.currentAction[0];var r=this.currentAction[1];if(r instanceof Object&&r.method){i=r.method;if(typeof i==="string")i=o[i]}else{i=s}if(this._currentMethod!==i){if(!(e instanceof Object)||i.SUPPORTS_MULTIPLE===true||e.length<=i.SUPPORTS_MULTIPLE){this._engineInstance=new i}else{this._engineInstance=new n(i)}this._currentMethod=i}this._engineInstance.reset(this.state,this.velocity);if(this.velocity!==undefined)r.velocity=this.velocity;this._engineInstance.set(e,r,a.bind(this))}r.prototype.set=function c(t,i,e){if(!i){this.reset(t);if(e)e();return this}var n=[t,i];this.actionQueue.push(n);this.callbackQueue.push(e);if(!this.currentAction)a.call(this);return this};r.prototype.reset=function p(t,i){this._currentMethod=null;this._engineInstance=null;this._callback=undefined;this.state=t;this.velocity=i;this.currentAction=null;this.actionQueue=[];this.callbackQueue=[]};r.prototype.delay=function l(t,i){this.set(this.get(),{duration:t,curve:function(){return 0}},i)};r.prototype.get=function f(t){if(this._engineInstance){if(this._engineInstance.getVelocity)this.velocity=this._engineInstance.getVelocity();this.state=this._engineInstance.get(t)}return this.state};r.prototype.isActive=function d(){return!!this.currentAction};r.prototype.halt=function v(){this.set(this.get())};e.exports=r});define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,i,e){var n=t("./RenderNode");var s=t("./EventHandler");var r=t("./ElementAllocator");var o=t("./Transform");var a=t("famous/transitions/Transitionable");var h=[0,0];function u(t){return[t.clientWidth,t.clientHeight]}function c(t){this.container=t;this._allocator=new r(t);this._node=new n;this._eventOutput=new s;this._size=u(this.container);this._perspectiveState=new a(0);this._perspective=undefined;this._nodeContext={allocator:this._allocator,transform:o.identity,opacity:1,origin:h,align:null,size:this._size};this._eventOutput.on("resize",function(){this.setSize(u(this.container))}.bind(this))}c.prototype.getAllocator=function p(){return this._allocator};c.prototype.add=function l(t){return this._node.add(t)};c.prototype.migrate=function f(t){if(t===this.container)return;this.container=t;this._allocator.migrate(t)};c.prototype.getSize=function d(){return this._size};c.prototype.setSize=function v(t){if(!t)t=u(this.container);this._size[0]=t[0];this._size[1]=t[1]};c.prototype.update=function _(t){if(t){if(t.transform)this._nodeContext.transform=t.transform;if(t.opacity)this._nodeContext.opacity=t.opacity;if(t.origin)this._nodeContext.origin=t.origin;if(t.align)this._nodeContext.align=t.align;if(t.size)this._nodeContext.size=t.size}var i=this._perspectiveState.get();if(i!==this._perspective){this.container.style.perspective=i?i.toFixed()+"px":"";this.container.style.webkitPerspective=i?i.toFixed():"";this._perspective=i}this._node.commit(this._nodeContext)};c.prototype.getPerspective=function y(){return this._perspectiveState.get()};c.prototype.setPerspective=function g(t,i,e){return this._perspectiveState.set(t,i,e)};c.prototype.emit=function m(t,i){return this._eventOutput.emit(t,i)};c.prototype.on=function O(t,i){return this._eventOutput.on(t,i)};c.prototype.removeListener=function S(t,i){return this._eventOutput.removeListener(t,i)};c.prototype.pipe=function T(t){return this._eventOutput.pipe(t)};c.prototype.unpipe=function x(t){return this._eventOutput.unpipe(t)};e.exports=c});define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,i,e){var n=t("./EventHandler");function s(t){this._value=t;this.eventOutput=null}s.patch=function o(t,i){var e=new s(t);for(var n=1;n<arguments.length;n++)e.patch(arguments[n]);return t};function r(){this.eventOutput=new n;this.eventOutput.bindThis(this);n.setOutputHandler(this,this.eventOutput)}s.prototype.patch=function a(){var t=this._value;for(var i=0;i<arguments.length;i++){var e=arguments[i];for(var n in e){if(n in t&&(e[n]&&e[n].constructor===Object)&&(t[n]&&t[n].constructor===Object)){if(!t.hasOwnProperty(n))t[n]=Object.create(t[n]);this.key(n).patch(e[n]);if(this.eventOutput)this.eventOutput.emit("change",{id:n,value:this.key(n).value()})}else this.set(n,e[n])}}return this};s.prototype.setOptions=s.prototype.patch;s.prototype.key=function h(t){var i=new s(this._value[t]);if(!(i._value instanceof Object)||i._value instanceof Array)i._value={};return i};s.prototype.get=function u(t){return this._value[t]};s.prototype.getOptions=s.prototype.get;s.prototype.set=function c(t,i){var e=this.get(t);this._value[t]=i;if(this.eventOutput&&i!==e)this.eventOutput.emit("change",{id:t,value:i});return this};s.prototype.value=function p(){return this._value};s.prototype.on=function l(){r.call(this);return this.on.apply(this,arguments)};s.prototype.removeListener=function f(){r.call(this);return this.removeListener.apply(this,arguments)};s.prototype.pipe=function d(){r.call(this);return this.pipe.apply(this,arguments)};s.prototype.unpipe=function v(){r.call(this);return this.unpipe.apply(this,arguments)};e.exports=s});define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,i,e){var n=t("./Context");var s=t("./EventHandler");var r=t("./OptionsManager");var o={};var a=[];var h=[];var u=[];var c=Date.now();var p;var l;var f=true;var d={};var v=new s;var _={containerType:"div",containerClass:"famous-container",fpsCap:undefined,runLoop:true};var y=new r(_);var g=10;o.step=function S(){var t=Date.now();if(l&&t-c<l)return;var i=0;p=t-c;c=t;v.emit("prerender");for(i=0;i<h.length;i++)h[i].call(this);h.splice(0);while(u.length&&Date.now()-t<g){u.shift().call(this)}for(i=0;i<a.length;i++)a[i].update();v.emit("postrender")};function m(){if(_.runLoop){o.step();requestAnimationFrame(m)}else f=false}requestAnimationFrame(m);function O(t){for(var i=0;i<a.length;i++){a[i].emit("resize")}v.emit("resize")}window.addEventListener("resize",O,false);O();window.addEventListener("touchmove",function(t){t.preventDefault()},true);o.pipe=function T(t){if(t.subscribe instanceof Function)return t.subscribe(o);else return v.pipe(t)};o.unpipe=function x(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(o);else return v.unpipe(t)};o.on=function w(t,i){if(!(t in d)){d[t]=v.emit.bind(v,t);if(document.body){document.body.addEventListener(t,d[t])}else{o.nextTick(function(t,i){document.body.addEventListener(t,i)}.bind(this,t,d[t]))}}return v.on(t,i)};o.emit=function E(t,i){return v.emit(t,i)};o.removeListener=function b(t,i){return v.removeListener(t,i)};o.getFPS=function z(){return 1e3/p};o.setFPSCap=function M(t){l=Math.floor(1e3/t)};o.getOptions=function P(){return y.getOptions.apply(y,arguments)};o.setOptions=function I(t){return y.setOptions.apply(y,arguments)};o.createContext=function C(t){var i=false;if(!t){t=document.createElement(_.containerType);t.classList.add(_.containerClass);i=true}var e=new n(t);o.registerContext(e);if(i){o.nextTick(function(t,i){document.body.appendChild(i);t.emit("resize")}.bind(this,e,t))}return e};o.registerContext=function F(t){a.push(t);return t};o.nextTick=function N(t){h.push(t)};o.defer=function D(t){u.push(t)};y.on("change",function(t){if(t.id==="fpsCap")o.setFPSCap(t.value);else if(t.id==="runLoop"){if(!f&&t.value){f=true;requestAnimationFrame(m)}}});e.exports=o});define("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,i,e){var n=t("./Entity");var s=t("./EventHandler");var r=t("./Transform");var o=window.devicePixelRatio||1;var a=document.createElement("div").style.webkitTransform!==undefined;function h(t){this.options={};this.properties={};this.content="";this.classList=[];this.size=null;this._classesDirty=true;this._stylesDirty=true;this._sizeDirty=true;this._contentDirty=true;this._dirtyClasses=[];this._matrix=null;this._opacity=1;this._origin=null;this._size=null;this.eventForwarder=function i(t){this.emit(t.type,t)}.bind(this);this.eventHandler=new s;this.eventHandler.bindThis(this);this.id=n.register(this);if(t)this.setOptions(t);this._currTarget=null}h.prototype.elementType="div";h.prototype.elementClass="famous-surface";h.prototype.on=function O(t,i){if(this._currTarget)this._currTarget.addEventListener(t,this.eventForwarder);this.eventHandler.on(t,i)};h.prototype.removeListener=function S(t,i){this.eventHandler.removeListener(t,i)};h.prototype.emit=function T(t,i){if(i&&!i.origin)i.origin=this;var e=this.eventHandler.emit(t,i);if(e&&i&&i.stopPropagation)i.stopPropagation();return e};h.prototype.pipe=function x(t){return this.eventHandler.pipe(t)};h.prototype.unpipe=function w(t){return this.eventHandler.unpipe(t)};h.prototype.render=function E(){return this.id};h.prototype.setProperties=function b(t){for(var i in t){this.properties[i]=t[i]}this._stylesDirty=true};h.prototype.getProperties=function z(){return this.properties};h.prototype.addClass=function M(t){if(this.classList.indexOf(t)<0){this.classList.push(t);this._classesDirty=true}};h.prototype.removeClass=function P(t){var i=this.classList.indexOf(t);if(i>=0){this._dirtyClasses.push(this.classList.splice(i,1)[0]);this._classesDirty=true}};h.prototype.setClasses=function I(t){var i=0;var e=[];for(i=0;i<this.classList.length;i++){if(t.indexOf(this.classList[i])<0)e.push(this.classList[i])}for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i])};h.prototype.getClassList=function C(){return this.classList};h.prototype.setContent=function F(t){if(this.content!==t){this.content=t;this._contentDirty=true}};h.prototype.getContent=function N(){return this.content};h.prototype.setOptions=function D(t){if(t.size)this.setSize(t.size);if(t.classes)this.setClasses(t.classes);if(t.properties)this.setProperties(t.properties);if(t.content)this.setContent(t.content)};function u(t){for(var i in this.eventHandler.listeners){t.addEventListener(i,this.eventForwarder)}}function c(t){for(var i in this.eventHandler.listeners){t.removeEventListener(i,this.eventForwarder)}}function p(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function l(t){for(var i in this.properties){t.style[i]=this.properties[i]}}function f(t){for(var i in this.properties){t.style[i]=""}}function d(t){t[12]=Math.round(t[12]*o)/o;t[13]=Math.round(t[13]*o)/o;var i="matrix3d(";for(var e=0;e<15;e++){i+=t[e]<1e-6&&t[e]>-1e-6?"0,":t[e]+","}i+=t[15]+")";return i}var v;if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){v=function(t,i){t.style.zIndex=i[14]*1e6|0;t.style.transform=d(i)}}else if(a){v=function(t,i){t.style.webkitTransform=d(i)}}else{v=function(t,i){t.style.transform=d(i)}}function _(t){return 100*t[0]+"% "+100*t[1]+"%"}var y=a?function(t,i){t.style.webkitTransformOrigin=_(i)}:function(t,i){t.style.transformOrigin=_(i)};var g=a?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)";t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)";t.style.opacity=0};function m(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}h.prototype.setup=function A(t){var i=t.allocate(this.elementType);if(this.elementClass){if(this.elementClass instanceof Array){for(var e=0;e<this.elementClass.length;e++){i.classList.add(this.elementClass[e])}}else{i.classList.add(this.elementClass)}}i.style.display="";u.call(this,i);this._currTarget=i;this._stylesDirty=true;this._classesDirty=true;
this._sizeDirty=true;this._contentDirty=true;this._matrix=null;this._opacity=undefined;this._origin=null;this._size=null};h.prototype.commit=function L(t){if(!this._currTarget)this.setup(t.allocator);var i=this._currTarget;var e=t.transform;var n=t.opacity;var s=t.origin;var o=t.size;if(this._classesDirty){p.call(this,i);var a=this.getClassList();for(var h=0;h<a.length;h++)i.classList.add(a[h]);this._classesDirty=false}if(this._stylesDirty){l.call(this,i);this._stylesDirty=false}if(this._contentDirty){this.deploy(i);this.eventHandler.emit("deploy");this._contentDirty=false}if(this.size){var u=o;o=[this.size[0],this.size[1]];if(o[0]===undefined&&u[0])o[0]=u[0];if(o[1]===undefined&&u[1])o[1]=u[1]}if(o[0]===true)o[0]=i.clientWidth;if(o[1]===true)o[1]=i.clientHeight;if(m(this._size,o)){if(!this._size)this._size=[0,0];this._size[0]=o[0];this._size[1]=o[1];this._sizeDirty=true}if(!e&&this._matrix){this._matrix=null;this._opacity=0;g(i);return}if(this._opacity!==n){this._opacity=n;i.style.opacity=n>=1?"0.999999":n}if(m(this._origin,s)||r.notEquals(this._matrix,e)||this._sizeDirty){if(!e)e=r.identity;this._matrix=e;var c=e;if(s){if(!this._origin)this._origin=[0,0];this._origin[0]=s[0];this._origin[1]=s[1];c=r.thenMove(e,[-this._size[0]*s[0],-this._size[1]*s[1],0]);y(i,s)}v(i,c)}if(this._sizeDirty){if(this._size){i.style.width=this.size&&this.size[0]===true?"":this._size[0]+"px";i.style.height=this.size&&this.size[1]===true?"":this._size[1]+"px"}this._sizeDirty=false}};h.prototype.cleanup=function R(t){var i=0;var e=this._currTarget;this.eventHandler.emit("recall");this.recall(e);e.style.display="none";e.style.width="";e.style.height="";this._size=null;f.call(this,e);var n=this.getClassList();p.call(this,e);for(i=0;i<n.length;i++)e.classList.remove(n[i]);if(this.elementClass){if(this.elementClass instanceof Array){for(i=0;i<this.elementClass.length;i++){e.classList.remove(this.elementClass[i])}}else{e.classList.remove(this.elementClass)}}c.call(this,e);this._currTarget=null;t.deallocate(e);g(e)};h.prototype.deploy=function k(t){var i=this.getContent();if(i instanceof Node){while(t.hasChildNodes())t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i};h.prototype.recall=function q(t){var i=document.createDocumentFragment();while(t.hasChildNodes())i.appendChild(t.firstChild);this.setContent(i)};h.prototype.getSize=function H(t){return this._size};h.prototype.setSize=function V(t){this.size=t?[t[0],t[1]]:null;this._sizeDirty=true};e.exports=h});define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,i,e){var n=t("./Context");var s=t("./Transform");var r=t("./Surface");function o(t){r.call(this,t);this._shouldRecalculateSize=false;this._container=document.createDocumentFragment();this.context=new n(this._container);this.setContent(this._container);this._groupSize=[undefined,undefined]}o.SIZE_ZERO=[0,0];o.prototype=Object.create(r.prototype);o.prototype.elementType="div";o.prototype.elementClass="famous-group";o.prototype.add=function a(){return this.context.add.apply(this.context,arguments)};o.prototype.render=function h(){return r.prototype.render.call(this)};o.prototype.deploy=function u(t){this.context.migrate(t)};o.prototype.recall=function c(t){this._container=document.createDocumentFragment();this.context.migrate(this._container)};o.prototype.commit=function p(t){var i=t.transform;var e=t.origin;var n=t.opacity;var a=t.size;var h=r.prototype.commit.call(this,{allocator:t.allocator,transform:s.thenMove(i,[-e[0]*a[0],-e[1]*a[1],0]),opacity:n,origin:e,size:o.SIZE_ZERO});if(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1]){this._groupSize[0]=a[0];this._groupSize[1]=a[1];this.context.setSize(a)}this.context.update({transform:s.translate(-e[0]*a[0],-e[1]*a[1],0),origin:e,size:a});return h};e.exports=o});define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,i,e){var n=t("./Transitionable");var s=t("famous/core/Transform");var r=t("famous/utilities/Utility");function o(t){this._final=s.identity.slice();this.translate=new n([0,0,0]);this.rotate=new n([0,0,0]);this.skew=new n([0,0,0]);this.scale=new n([1,1,1]);if(t)this.set(t)}function a(){return s.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}o.prototype.setTranslate=function h(t,i,e){this.translate.set(t,i,e);this._final=this._final.slice();this._final[12]=t[0];this._final[13]=t[1];if(t[2]!==undefined)this._final[14]=t[2];return this};o.prototype.setScale=function u(t,i,e){this.scale.set(t,i,e);this._final=this._final.slice();this._final[0]=t[0];this._final[5]=t[1];if(t[2]!==undefined)this._final[10]=t[2];return this};o.prototype.setRotate=function c(t,i,e){this.rotate.set(t,i,e);this._final=a.call(this);this._final=s.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()});return this};o.prototype.setSkew=function p(t,i,e){this.skew.set(t,i,e);this._final=s.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t});return this};o.prototype.set=function l(t,i,e){this._final=t;var n=s.interpret(t);var o=e?r.after(4,e):null;this.translate.set(n.translate,i,o);this.rotate.set(n.rotate,i,o);this.skew.set(n.skew,i,o);this.scale.set(n.scale,i,o);return this};o.prototype.setDefaultTransition=function f(t){this.translate.setDefault(t);this.rotate.setDefault(t);this.skew.setDefault(t);this.scale.setDefault(t)};o.prototype.get=function d(){if(this.isActive()){return a.call(this)}else return this._final};o.prototype.getFinal=function v(){return this._final};o.prototype.isActive=function _(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()};o.prototype.halt=function y(){this._final=this.get();this.translate.halt();this.rotate.halt();this.skew.halt();this.scale.halt()};e.exports=o});define("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){var n=t("./Transform");var s=t("famous/transitions/Transitionable");var r=t("famous/transitions/TransitionableTransform");function o(t){this._transformGetter=null;this._opacityGetter=null;this._originGetter=null;this._alignGetter=null;this._sizeGetter=null;this._legacyStates={};this._output={transform:n.identity,opacity:1,origin:null,align:null,size:null,target:null};if(t){if(t.transform)this.transformFrom(t.transform);if(t.opacity!==undefined)this.opacityFrom(t.opacity);if(t.origin)this.originFrom(t.origin);if(t.align)this.alignFrom(t.align);if(t.size)this.sizeFrom(t.size)}}o.prototype.transformFrom=function h(t){if(t instanceof Function)this._transformGetter=t;else if(t instanceof Object&&t.get)this._transformGetter=t.get.bind(t);else{this._transformGetter=null;this._output.transform=t}return this};o.prototype.opacityFrom=function u(t){if(t instanceof Function)this._opacityGetter=t;else if(t instanceof Object&&t.get)this._opacityGetter=t.get.bind(t);else{this._opacityGetter=null;this._output.opacity=t}return this};o.prototype.originFrom=function c(t){if(t instanceof Function)this._originGetter=t;else if(t instanceof Object&&t.get)this._originGetter=t.get.bind(t);else{this._originGetter=null;this._output.origin=t}return this};o.prototype.alignFrom=function p(t){if(t instanceof Function)this._alignGetter=t;else if(t instanceof Object&&t.get)this._alignGetter=t.get.bind(t);else{this._alignGetter=null;this._output.align=t}return this};o.prototype.sizeFrom=function l(t){if(t instanceof Function)this._sizeGetter=t;else if(t instanceof Object&&t.get)this._sizeGetter=t.get.bind(t);else{this._sizeGetter=null;this._output.size=t}return this};o.prototype.setTransform=function f(t,i,e){if(i||this._legacyStates.transform){if(!this._legacyStates.transform){this._legacyStates.transform=new r(this._output.transform)}if(!this._transformGetter)this.transformFrom(this._legacyStates.transform);this._legacyStates.transform.set(t,i,e);return this}else return this.transformFrom(t)};o.prototype.setOpacity=function d(t,i,e){if(i||this._legacyStates.opacity){if(!this._legacyStates.opacity){this._legacyStates.opacity=new s(this._output.opacity)}if(!this._opacityGetter)this.opacityFrom(this._legacyStates.opacity);return this._legacyStates.opacity.set(t,i,e)}else return this.opacityFrom(t)};o.prototype.setOrigin=function v(t,i,e){if(i||this._legacyStates.origin){if(!this._legacyStates.origin){this._legacyStates.origin=new s(this._output.origin||[0,0])}if(!this._originGetter)this.originFrom(this._legacyStates.origin);this._legacyStates.origin.set(t,i,e);return this}else return this.originFrom(t)};o.prototype.setAlign=function _(t,i,e){if(i||this._legacyStates.align){if(!this._legacyStates.align){this._legacyStates.align=new s(this._output.align||[0,0])}if(!this._alignGetter)this.alignFrom(this._legacyStates.align);this._legacyStates.align.set(t,i,e);return this}else return this.alignFrom(t)};o.prototype.setSize=function y(t,i,e){if(t&&(i||this._legacyStates.size)){if(!this._legacyStates.size){this._legacyStates.size=new s(this._output.size||[0,0])}if(!this._sizeGetter)this.sizeFrom(this._legacyStates.size);this._legacyStates.size.set(t,i,e);return this}else return this.sizeFrom(t)};o.prototype.halt=function g(){if(this._legacyStates.transform)this._legacyStates.transform.halt();if(this._legacyStates.opacity)this._legacyStates.opacity.halt();if(this._legacyStates.origin)this._legacyStates.origin.halt();if(this._legacyStates.align)this._legacyStates.align.halt();if(this._legacyStates.size)this._legacyStates.size.halt();this._transformGetter=null;this._opacityGetter=null;this._originGetter=null;this._alignGetter=null;this._sizeGetter=null};o.prototype.getTransform=function m(){return this._transformGetter()};o.prototype.getFinalTransform=function O(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform};o.prototype.getOpacity=function S(){return this._opacityGetter()};o.prototype.getOrigin=function T(){return this._originGetter()};o.prototype.getAlign=function x(){return this._alignGetter()};o.prototype.getSize=function w(){return this._sizeGetter?this._sizeGetter():this._output.size};function a(){if(this._transformGetter)this._output.transform=this._transformGetter();if(this._opacityGetter)this._output.opacity=this._opacityGetter();if(this._originGetter)this._output.origin=this._originGetter();if(this._alignGetter)this._output.align=this._alignGetter();if(this._sizeGetter)this._output.size=this._sizeGetter()}o.prototype.modify=function E(t){a.call(this);this._output.target=t;return this._output};e.exports=o});define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(t,i,e){var n=t("./Transform");var s=t("./Modifier");var r=t("./RenderNode");function o(t){this.id=null;this._objects=null;this.node=new r;this._definition=null;if(t)this.load(t)}var a={translate:n.translate,rotate:n.rotate,rotateX:n.rotateX,rotateY:n.rotateY,rotateZ:n.rotateZ,rotateAxis:n.rotateAxis,scale:n.scale,skew:n.skew,matrix3d:function(){return arguments}};o.prototype.create=function l(){return new o(this._definition)};function h(t){for(var i in a){if(i in t){var e=t[i];if(!(e instanceof Array))e=[e];return a[i].apply(this,e)}}}function u(t){var i=t.transform;var e=t.opacity;var r=t.origin;var o=t.size;var a=n.identity;if(i instanceof Array){if(i.length===16&&typeof i[0]==="number"){a=i}else{for(var u=0;u<i.length;u++){a=n.multiply(a,h(i[u]))}}}else if(i instanceof Object){a=h(i)}var c=new s({transform:a,opacity:e,origin:r,size:o});return c}function c(t){var i=new r;for(var e=0;e<t.length;e++){var n=p.call(this,t[e]);if(n)i.add(n)}return i}function p(t){var i;var e;if(t instanceof Array){i=c.call(this,t)}else{e=this._objects.length;if(t.render&&t.render instanceof Function){i=t}else if(t.target){var n=p.call(this,t.target);var s=u.call(this,t);i=new r(s);i.add(n);if(t.id)this.id[t.id]=s}else if(t.id){i=new r;this.id[t.id]=i}}this._objects[e]=i;return i}o.prototype.load=function f(t){this._definition=t;this.id={};this._objects=[];this.node.set(p.call(this,t))};o.prototype.add=function d(){return this.node.add.apply(this.node,arguments)};o.prototype.render=function v(){return this.node.render.apply(this.node,arguments)};e.exports=o});define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,i,e){var n=t("./EventHandler");var s=t("./OptionsManager");var r=t("./RenderNode");function o(t){this._node=new r;this._eventInput=new n;this._eventOutput=new n;n.setInputHandler(this,this._eventInput);n.setOutputHandler(this,this._eventOutput);this.options=Object.create(this.constructor.DEFAULT_OPTIONS||o.DEFAULT_OPTIONS);this._optionsManager=new s(this.options);if(t)this.setOptions(t)}o.DEFAULT_OPTIONS={};o.prototype.getOptions=function a(){return this._optionsManager.value()};o.prototype.setOptions=function h(t){this._optionsManager.patch(t)};o.prototype.add=function u(){return this._node.add.apply(this._node,arguments)};o.prototype._add=o.prototype.add;o.prototype.render=function c(){return this._node.render()};o.prototype.getSize=function p(){if(this._node&&this._node.getSize){return this._node.getSize.apply(this._node,arguments)||this.options.size}else return this.options.size};e.exports=o});define("famous/core/ViewSequence",["require","exports","module"],function(t,i,e){function n(t){if(!t)t=[];if(t instanceof Array)t={array:t};this._=null;this.index=t.index||0;if(t.array)this._=new this.constructor.Backing(t.array);else if(t._)this._=t._;if(this.index===this._.firstIndex)this._.firstNode=this;if(this.index===this._.firstIndex+this._.array.length-1)this._.lastNode=this;if(t.loop!==undefined)this._.loop=t.loop;this._previousNode=null;this._nextNode=null}n.Backing=function s(t){this.array=t;this.firstIndex=0;this.loop=false;this.firstNode=null;this.lastNode=null};n.Backing.prototype.getValue=function r(t){var i=t-this.firstIndex;if(i<0||i>=this.array.length)return null;return this.array[i]};n.Backing.prototype.setValue=function o(t,i){this.array[t-this.firstIndex]=i};n.Backing.prototype.reindex=function a(t,i,e){if(!this.array[0])return;var n=0;var s=this.firstIndex;var r=e-i;var o=this.firstNode;while(s<t-1){o=o.getNext();s++}var a=o;for(n=0;n<i;n++){o=o.getNext();if(o)o._previousNode=a}var h=o?o.getNext():null;a._nextNode=null;o=a;for(n=0;n<e;n++)o=o.getNext();s+=e;if(o!==h){o._nextNode=h;if(h)h._previousNode=o}if(h){o=h;s++;while(o&&s<this.array.length+this.firstIndex){if(o._nextNode)o.index+=r;else o.index=s;o=o.getNext();s++}}};n.prototype.getPrevious=function h(){if(this.index===this._.firstIndex){if(this._.loop){this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1});this._previousNode._nextNode=this}else{this._previousNode=null}}else if(!this._previousNode){this._previousNode=new this.constructor({_:this._,index:this.index-1});this._previousNode._nextNode=this}return this._previousNode};n.prototype.getNext=function u(){if(this.index===this._.firstIndex+this._.array.length-1){if(this._.loop){this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex});this._nextNode._previousNode=this}else{this._nextNode=null}}else if(!this._nextNode){this._nextNode=new this.constructor({_:this._,index:this.index+1});this._nextNode._previousNode=this}return this._nextNode};n.prototype.getIndex=function c(){return this.index};n.prototype.toString=function p(){return""+this.index};n.prototype.unshift=function l(t){this._.array.unshift.apply(this._.array,arguments);this._.firstIndex-=arguments.length};n.prototype.push=function f(t){this._.array.push.apply(this._.array,arguments)};n.prototype.splice=function d(t,i){var e=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,i].concat(e));this._.reindex(t,i,e.length)};n.prototype.swap=function v(t){var i=t.get();var e=this.get();this._.setValue(this.index,i);this._.setValue(t.index,e);var n=this._previousNode;var s=this._nextNode;var r=this.index;var o=t._previousNode;var a=t._nextNode;var h=t.index;this.index=h;this._previousNode=o===this?t:o;if(this._previousNode)this._previousNode._nextNode=this;this._nextNode=a===this?t:a;if(this._nextNode)this._nextNode._previousNode=this;t.index=r;t._previousNode=n===t?this:n;if(t._previousNode)t._previousNode._nextNode=t;t._nextNode=s===t?this:s;if(t._nextNode)t._nextNode._previousNode=t;if(this.index===this._.firstIndex)this._.firstNode=this;else if(this.index===this._.firstIndex+this._.array.length-1)this._.lastNode=this;if(t.index===this._.firstIndex)this._.firstNode=t;else if(t.index===this._.firstIndex+this._.array.length-1)this._.lastNode=t};n.prototype.get=function _(){return this._.getValue(this.index)};n.prototype.getSize=function y(){var t=this.get();return t?t.getSize():null};n.prototype.render=function g(){var t=this.get();return t?t.render.apply(t,arguments):null};e.exports=n});define("famous/math/Utilities",["require","exports","module"],function(t,i,e){var n={};n.clamp=function s(t,i){return Math.max(Math.min(t,i[1]),i[0])};n.length=function r(t){var i=0;for(var e=0;e<t.length;e++){i+=t[e]*t[e]}return Math.sqrt(i)};e.exports=n});define("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){var n=t("famous/core/Modifier");var s=t("famous/core/Transform");var r=t("famous/transitions/Transitionable");var o=t("famous/transitions/TransitionableTransform");function a(t){this._transformState=new o(s.identity);this._opacityState=new r(1);this._originState=new r([0,0]);this._alignState=new r([0,0]);this._sizeState=new r([0,0]);this._modifier=new n({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null});this._hasOrigin=false;this._hasAlign=false;this._hasSize=false;if(t){if(t.transform)this.setTransform(t.transform);if(t.opacity!==undefined)this.setOpacity(t.opacity);if(t.origin)this.setOrigin(t.origin);if(t.align)this.setAlign(t.align);if(t.size)this.setSize(t.size)}}a.prototype.setTransform=function h(t,i,e){this._transformState.set(t,i,e);return this};a.prototype.setOpacity=function u(t,i,e){this._opacityState.set(t,i,e);return this};a.prototype.setOrigin=function c(t,i,e){if(t===null){if(this._hasOrigin){this._modifier.originFrom(null);this._hasOrigin=false}return this}else if(!this._hasOrigin){this._hasOrigin=true;this._modifier.originFrom(this._originState)}this._originState.set(t,i,e);return this};a.prototype.setAlign=function p(t,i,e){if(t===null){if(this._hasAlign){this._modifier.alignFrom(null);this._hasAlign=false}return this}else if(!this._hasAlign){this._hasAlign=true;this._modifier.alignFrom(this._alignState)}this._alignState.set(t,i,e);return this};a.prototype.setSize=function l(t,i,e){if(t===null){if(this._hasSize){this._modifier.sizeFrom(null);this._hasSize=false}return this}else if(!this._hasSize){this._hasSize=true;this._modifier.sizeFrom(this._sizeState)}this._sizeState.set(t,i,e);return this};a.prototype.halt=function f(){this._transformState.halt();this._opacityState.halt();this._originState.halt();this._alignState.halt();this._sizeState.halt()};a.prototype.getTransform=function d(){return this._transformState.get()};a.prototype.getFinalTransform=function v(){return this._transformState.getFinal()};a.prototype.getOpacity=function _(){return this._opacityState.get()};a.prototype.getOrigin=function y(){return this._hasOrigin?this._originState.get():null};a.prototype.getAlign=function g(){return this._hasAlign?this._alignState.get():null};a.prototype.getSize=function m(){return this._hasSize?this._sizeState.get():null};a.prototype.modify=function O(t){return this._modifier.modify(t)};e.exports=a});define("famous/math/Vector",["require","exports","module"],function(t,i,e){function n(t,i,e){if(arguments.length===1)this.set(t);else{this.x=t||0;this.y=i||0;this.z=e||0}return this}var s=new n(0,0,0);n.prototype.add=function u(t){return r.call(s,this.x+t.x,this.y+t.y,this.z+t.z)};n.prototype.sub=function c(t){return r.call(s,this.x-t.x,this.y-t.y,this.z-t.z)};n.prototype.mult=function p(t){return r.call(s,t*this.x,t*this.y,t*this.z)};n.prototype.div=function l(t){return this.mult(1/t)};n.prototype.cross=function f(t){var i=this.x;var e=this.y;var n=this.z;var o=t.x;var a=t.y;var h=t.z;return r.call(s,n*a-e*h,i*h-n*o,e*o-i*a)};n.prototype.equals=function d(t){return t.x===this.x&&t.y===this.y&&t.z===this.z};n.prototype.rotateX=function v(t){var i=this.x;var e=this.y;var n=this.z;var o=Math.cos(t);var a=Math.sin(t);return r.call(s,i,e*o-n*a,e*a+n*o)};n.prototype.rotateY=function _(t){var i=this.x;var e=this.y;var n=this.z;var o=Math.cos(t);var a=Math.sin(t);return r.call(s,n*a+i*o,e,n*o-i*a)};n.prototype.rotateZ=function y(t){var i=this.x;var e=this.y;var n=this.z;var o=Math.cos(t);var a=Math.sin(t);return r.call(s,i*o-e*a,i*a+e*o,n)};n.prototype.dot=function g(t){return this.x*t.x+this.y*t.y+this.z*t.z};n.prototype.normSquared=function m(){return this.dot(this)};n.prototype.norm=function O(){return Math.sqrt(this.normSquared())};n.prototype.normalize=function S(t){if(arguments.length===0)t=1;var i=this.norm();if(i>1e-7)return a.call(s,this.mult(t/i));else return r.call(s,t,0,0)};n.prototype.clone=function T(){return new n(this)};n.prototype.isZero=function x(){return!(this.x||this.y||this.z)};function r(t,i,e){this.x=t;this.y=i;this.z=e;return this}function o(t){return r.call(this,t[0],t[1],t[2]||0)}function a(t){return r.call(this,t.x,t.y,t.z)}function h(t){return r.call(this,t,0,0)}n.prototype.set=function w(t){if(t instanceof Array)return o.call(this,t);if(t instanceof n)return a.call(this,t);if(typeof t==="number")return h.call(this,t)};n.prototype.setXYZ=function(t,i,e){return r.apply(this,arguments)};n.prototype.set1D=function(t){return h.call(this,t)};n.prototype.put=function E(t){a.call(t,s)};n.prototype.clear=function b(){return r.call(this,0,0,0)};n.prototype.cap=function z(z){if(z===Infinity)return a.call(s,this);var t=this.norm();if(t>z)return a.call(s,this.mult(z/t));else return a.call(s,this)};n.prototype.project=function M(t){return t.mult(this.dot(t))};n.prototype.reflectAcross=function P(t){t.normalize().put(t);return a(s,this.sub(this.project(t).mult(2)))};n.prototype.get=function I(){return[this.x,this.y,this.z]};n.prototype.get1D=function(){return this.x};e.exports=n});define("famous/math/Matrix",["require","exports","module","./Vector"],function(t,i,e){var n=t("./Vector");function s(t){this.values=t||[[1,0,0],[0,1,0],[0,0,1]];return this}var r=new s;var o=new n;s.prototype.get=function a(){return this.values};s.prototype.set=function h(t){this.values=t};s.prototype.vectorMultiply=function u(t){var i=this.get();var e=t.x;var n=t.y;var s=t.z;var r=i[0];var a=i[1];var h=i[2];var u=r[0];var c=r[1];var p=r[2];var l=a[0];var f=a[1];var d=a[2];var v=h[0];var _=h[1];var y=h[2];return o.setXYZ(u*e+c*n+p*s,l*e+f*n+d*s,v*e+_*n+y*s)};s.prototype.multiply=function c(t){var i=this.get();var e=[[]];for(var n=0;n<3;n++){e[n]=[];for(var s=0;s<3;s++){var o=0;for(var a=0;a<3;a++){o+=i[n][a]*t[a][s]}e[n][s]=o}}return r.set(e)};s.prototype.transpose=function p(){var t=[];var i=this.get();for(var e=0;e<3;e++){for(var n=0;n<3;n++){t[e][n]=i[n][e]}}return r.set(t)};s.prototype.clone=function l(){var t=this.get();var i=[];for(var e=0;e<3;e++)i[e]=t[e].slice();return new s(i)};e.exports=s});define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(t,i,e){var n=t("./Matrix");function s(t,i,e,n){if(arguments.length===1)this.set(t);else{this.w=t!==undefined?t:1;this.x=i!==undefined?i:0;this.y=e!==undefined?e:0;this.z=n!==undefined?n:0}return this}var r=new s(1,0,0,0);s.prototype.add=function u(t){return r.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)};s.prototype.sub=function c(t){return r.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)};s.prototype.scalarDivide=function p(t){return this.scalarMultiply(1/t)};s.prototype.scalarMultiply=function l(t){return r.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)};s.prototype.multiply=function f(t){var i=this.x;var e=this.y;var n=this.z;var s=this.w;var o=t.x;var a=t.y;var h=t.z;var u=t.w||0;return r.setWXYZ(s*u-i*o-e*a-n*h,i*u+o*s+a*n-e*h,e*u+a*s+i*h-o*n,n*u+h*s+o*e-i*a)};var o=new s(1,0,0,0);s.prototype.rotateVector=function d(t){o.set(this.conj());return r.set(this.multiply(t).multiply(o))};s.prototype.inverse=function v(){return r.set(this.conj().scalarDivide(this.normSquared()))};s.prototype.negate=function _(){return this.scalarMultiply(-1)};s.prototype.conj=function y(){return r.setWXYZ(this.w,-this.x,-this.y,-this.z)};s.prototype.normalize=function g(t){t=t===undefined?1:t;return this.scalarDivide(t*this.norm())};s.prototype.makeFromAngleAndAxis=function m(t,i){var e=i.normalize();var n=t*.5;var s=-Math.sin(n);this.x=s*e.x;this.y=s*e.y;this.z=s*e.z;this.w=Math.cos(n);return this};s.prototype.setWXYZ=function O(t,i,e,n){r.clear();this.w=t;this.x=i;this.y=e;this.z=n;return this};s.prototype.set=function S(t){if(t instanceof Array){this.w=t[0];this.x=t[1];this.y=t[2];this.z=t[3]}else{this.w=t.w;this.x=t.x;this.y=t.y;this.z=t.z}if(this!==r)r.clear();return this};s.prototype.put=function T(t){t.set(r)};s.prototype.clone=function x(){return new s(this)};s.prototype.clear=function w(){this.w=1;this.x=0;this.y=0;this.z=0;return this};s.prototype.isEqual=function E(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z};s.prototype.dot=function b(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z};s.prototype.normSquared=function z(){return this.dot(this)};s.prototype.norm=function M(){return Math.sqrt(this.normSquared())};s.prototype.isZero=function P(){return!(this.x||this.y||this.z)};s.prototype.getTransform=function I(){var t=this.normalize(1);var i=t.x;var e=t.y;var n=t.z;var s=t.w;return[1-2*e*e-2*n*n,2*i*e-2*n*s,2*i*n+2*e*s,0,2*i*e+2*n*s,1-2*i*i-2*n*n,2*e*n-2*i*s,0,2*i*n-2*e*s,2*e*n+2*i*s,1-2*i*i-2*e*e,0,0,0,0,1]};var a=new n;s.prototype.getMatrix=function C(){var t=this.normalize(1);var i=t.x;var e=t.y;var n=t.z;var s=t.w;return a.set([[1-2*e*e-2*n*n,2*i*e+2*n*s,2*i*n-2*e*s],[2*i*e-2*n*s,1-2*i*i-2*n*n,2*e*n+2*i*s],[2*i*n+2*e*s,2*e*n-2*i*s,1-2*i*i-2*e*e]])};var h=1e-5;s.prototype.slerp=function F(t,i){var e;var n;var s;var o;var a;n=this.dot(t);if(1-n>h){e=Math.acos(n);s=Math.sin(e);o=Math.sin((1-i)*e)/s;a=Math.sin(i*e)/s}else{o=1-i;a=i}return r.set(this.scalarMultiply(o/a).add(t).multiply(a))};e.exports=s});define("famous/math/Random",["require","exports","module"],function(t,i,e){var n=Math.random;function s(t,i){return t+n()*(i-t)}function r(t,i){return t+n()*(i-t+1)>>0}var o={};o.integer=function a(t,i,e){t=t!==undefined?t:0;i=i!==undefined?i:1;if(e!==undefined){var n=[];for(var s=0;s<e;s++)n.push(r(t,i));return n}else return r(t,i)};o.range=function h(t,i,e){t=t!==undefined?t:0;i=i!==undefined?i:1;if(e!==undefined){var n=[];for(var r=0;r<e;r++)n.push(s(t,i));return n}else return s(t,i)};o.sign=function u(t){t=t!==undefined?t:.5;return n()<t?1:-1};o.bool=function c(t){t=t!==undefined?t:.5;return n()<t};e.exports=o});define("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,i,e){var n=t("famous/core/EventHandler");function s(t){this.options=Object.create(s.DEFAULT_OPTIONS);if(t)this.setOptions(t);this._particles=[];this._bodies=[];this._agents={};this._forces=[];this._constraints=[];this._buffer=0;this._prevTime=h();this._isSleeping=false;this._eventHandler=null;this._currAgentId=0;this._hasBodies=false}var r=17;var o=1e3/120;var a=17;s.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var h=function(){return Date.now}();s.prototype.setOptions=function w(t){for(var i in t)if(this.options[i])this.options[i]=t[i]};s.prototype.addBody=function E(t){t._engine=this;if(t.isBody){this._bodies.push(t);this._hasBodies=true}else this._particles.push(t);return t};s.prototype.removeBody=function b(t){var i=t.isBody?this._bodies:this._particles;var e=i.indexOf(t);if(e>-1){for(var n=0;n<Object.keys(this._agents).length;n++)this.detachFrom(n,t);i.splice(e,1)}if(this.getBodies().length===0)this._hasBodies=false};function u(t){if(t.applyForce)return this._forces;if(t.applyConstraint)return this._constraints}function c(t,i,e){if(i===undefined)i=this.getParticlesAndBodies();if(!(i instanceof Array))i=[i];this._agents[this._currAgentId]={agent:t,targets:i,source:e};u.call(this,t).push(this._currAgentId);return this._currAgentId++}s.prototype.attach=function z(t,i,e){if(t instanceof Array){var n=[];for(var s=0;s<t.length;s++)n[s]=c.call(this,t[s],i,e);return n}else return c.call(this,t,i,e)};s.prototype.attachTo=function M(t,i){p.call(this,t).targets.push(i)};s.prototype.detach=function P(t){var i=this.getAgent(t);var e=u.call(this,i);var n=e.indexOf(t);e.splice(n,1);delete this._agents[t]};s.prototype.detachFrom=function I(t,i){var e=p.call(this,t);if(e.source===i)this.detach(t);else{var n=e.targets;var s=n.indexOf(i);if(s>-1)n.splice(s,1)}};s.prototype.detachAll=function C(){this._agents={};this._forces=[];this._constraints=[];this._currAgentId=0};function p(t){return this._agents[t]}s.prototype.getAgent=function F(t){return p.call(this,t).agent};s.prototype.getParticles=function N(){return this._particles};s.prototype.getBodies=function D(){return this._bodies};s.prototype.getParticlesAndBodies=function A(){return this.getParticles().concat(this.getBodies())};s.prototype.forEachParticle=function L(t,i){var e=this.getParticles();for(var n=0,s=e.length;n<s;n++)t.call(this,e[n],i)};s.prototype.forEachBody=function R(t,i){if(!this._hasBodies)return;var e=this.getBodies();for(var n=0,s=e.length;n<s;n++)t.call(this,e[n],i)};s.prototype.forEach=function k(t,i){this.forEachParticle(t,i);this.forEachBody(t,i)};function l(t){var i=p.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function f(){for(var t=this._forces.length-1;t>-1;t--)l.call(this,t)}function d(t,i){var e=this._agents[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function v(t){var i=0;while(i<this.options.constraintSteps){for(var e=this._constraints.length-1;e>-1;e--)d.call(this,e,t);i++}}function _(t,i){t.integrateVelocity(i)}function y(t,i){t.integrateAngularMomentum(i);t.updateAngularVelocity()}function g(t,i){t.integrateOrientation(i)}function m(t,i){t.integratePosition(i);t.emit("update",t)}function O(t){f.call(this,t);this.forEach(_,t);this.forEachBody(y,t);v.call(this,t);this.forEachBody(g,t);this.forEach(m,t)}function S(){var t=0;var i=0;this.forEach(function(e){i=e.getEnergy();t+=i;if(i<e.sleepTolerance)e.sleep()});return t}function T(){var t=0;for(var i=this._forces.length-1;i>-1;i--)t+=this._forces[i].getEnergy()||0;return t}function x(){var t=0;for(var i=this._constraints.length-1;i>-1;i--)t+=this._constraints[i].getEnergy()||0;return t}s.prototype.getEnergy=function q(){return S.call(this)+T.call(this)+x.call(this)};s.prototype.step=function H(){var t=h();var i=t-this._prevTime;this._prevTime=t;if(i<o)return;if(i>a)i=a;O.call(this,r)};s.prototype.isSleeping=function V(){return this._isSleeping};s.prototype.sleep=function U(){this.emit("end",this);this._isSleeping=true};s.prototype.wake=function G(){this._prevTime=h();this.emit("start",this);this._isSleeping=false};s.prototype.emit=function j(t,i){if(this._eventHandler===null)return;this._eventHandler.emit(t,i)};s.prototype.on=function X(t,i){if(this._eventHandler===null)this._eventHandler=new n;this._eventHandler.on(t,i)};e.exports=s});define("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,i,e){var n=t("famous/core/OptionsManager");function s(t){this.options=Object.create(s.DEFAULT_OPTIONS);this._optionsManager=new n(this.options);
if(t)this.setOptions(t)}s.DEFAULT_OPTIONS={velocityCap:undefined,angularVelocityCap:undefined};s.prototype.setOptions=function r(t){this._optionsManager.patch(t)};s.prototype.getOptions=function o(){return this._optionsManager.value()};s.prototype.integrateVelocity=function a(t,i){var e=t.velocity;var n=t.inverseMass;var s=t.force;if(s.isZero())return;e.add(s.mult(i*n)).put(e);s.clear()};s.prototype.integratePosition=function h(t,i){var e=t.position;var n=t.velocity;if(this.options.velocityCap)n.cap(this.options.velocityCap).put(n);e.add(n.mult(i)).put(e)};s.prototype.integrateAngularMomentum=function u(t,i){var e=t.angularMomentum;var n=t.torque;if(n.isZero())return;if(this.options.angularVelocityCap)n.cap(this.options.angularVelocityCap).put(n);e.add(n.mult(i)).put(e);n.clear()};s.prototype.integrateOrientation=function c(t,i){var e=t.orientation;var n=t.angularVelocity;if(n.isZero())return;e.add(e.multiply(n).scalarMultiply(.5*i)).put(e)};e.exports=s});define("famous/physics/constraints/Constraint",["require","exports","module","famous/core/EventHandler"],function(t,i,e){var n=t("famous/core/EventHandler");function s(){this.options=this.options||{};this._energy=0;this._eventOutput=null}s.prototype.setOptions=function o(t){for(var i in t)this.options[i]=t[i]};s.prototype.applyConstraint=function a(){};s.prototype.getEnergy=function h(){return this._energy};s.prototype.setEnergy=function u(t){this._energy=t};function r(){this._eventOutput=new n;this._eventOutput.bindThis(this);n.setOutputHandler(this,this._eventOutput)}s.prototype.on=function c(){r.call(this);return this.on.apply(this,arguments)};s.prototype.addListener=function p(){r.call(this);return this.addListener.apply(this,arguments)};s.prototype.pipe=function l(){r.call(this);return this.pipe.apply(this,arguments)};s.prototype.removeListener=function f(){return this.removeListener.apply(this,arguments)};s.prototype.unpipe=function d(){return this.unpipe.apply(this,arguments)};e.exports=s});define("famous/transitions/Easing",["require","exports","module"],function(t,i,e){var n={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){if((t/=.5)<1)return.5*t*t;return-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){if((t/=.5)<1)return.5*t*t*t;return.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){if((t/=.5)<1)return.5*t*t*t*t;return-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){if((t/=.5)<1)return.5*t*t*t*t*t;return.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},outExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){if(t===0)return 0;if(t===1)return 1;if((t/=.5)<1)return.5*Math.pow(2,10*(t-1));return.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){if((t/=.5)<1)return-.5*(Math.sqrt(1-t*t)-1);return.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var i=1.70158;var e=0;var n=1;if(t===0)return 0;if(t===1)return 1;if(!e)e=.3;i=e/(2*Math.PI)*Math.asin(1/n);return-(n*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e))},outElastic:function(t){var i=1.70158;var e=0;var n=1;if(t===0)return 0;if(t===1)return 1;if(!e)e=.3;i=e/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/e)+1},inOutElastic:function(t){var i=1.70158;var e=0;var n=1;if(t===0)return 0;if((t/=.5)===2)return 1;if(!e)e=.3*1.5;i=e/(2*Math.PI)*Math.asin(1/n);if(t<1)return-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e));return n*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e)*.5+1},inBack:function(t,i){if(i===undefined)i=1.70158;return t*t*((i+1)*t-i)},outBack:function(t,i){if(i===undefined)i=1.70158;return--t*t*((i+1)*t+i)+1},inOutBack:function(t,i){if(i===undefined)i=1.70158;if((t/=.5)<1)return.5*(t*t*(((i*=1.525)+1)*t-i));return.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}},inOutBounce:function(t){if(t<.5)return n.inBounce(t*2)*.5;return n.outBounce(t*2-1)*.5+.5}};e.exports=n});define("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,i,e){var n=t("famous/math/Vector");var s=t("famous/core/Transform");var r=t("famous/core/EventHandler");var o=t("../integrators/SymplecticEuler");function a(t){t=t||{};this.position=new n;this.velocity=new n;this.force=new n;var i=a.DEFAULT_OPTIONS;this.setPosition(t.position||i.position);this.setVelocity(t.velocity||i.velocity);this.force.set(t.force||[0,0,0]);this.mass=t.mass!==undefined?t.mass:i.mass;this.axis=t.axis!==undefined?t.axis:i.axis;this.inverseMass=1/this.mass;this._isSleeping=false;this._engine=null;this._eventOutput=null;this._positionGetter=null;this.transform=s.identity.slice();this._spec={transform:this.transform,target:null}}a.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:undefined};a.SLEEP_TOLERANCE=1e-7;a.AXES={X:0,Y:1,Z:2};a.INTEGRATOR=new o;var h={start:"start",update:"update",end:"end"};var u=function(){return Date.now}();a.prototype.sleep=function p(){if(this._isSleeping)return;this.emit(h.end,this);this._isSleeping=true};a.prototype.wake=function l(){if(!this._isSleeping)return;this.emit(h.start,this);this._isSleeping=false;this._prevTime=u()};a.prototype.isBody=false;a.prototype.setPosition=function f(t){this.position.set(t)};a.prototype.setPosition1D=function d(t){this.position.x=t};a.prototype.getPosition=function v(){if(this._positionGetter instanceof Function)this.setPosition(this._positionGetter());this._engine.step();return this.position.get()};a.prototype.getPosition1D=function _(){this._engine.step();return this.position.x};a.prototype.positionFrom=function y(t){this._positionGetter=t};a.prototype.setVelocity=function g(t){this.velocity.set(t);this.wake()};a.prototype.setVelocity1D=function m(t){this.velocity.x=t;this.wake()};a.prototype.getVelocity=function O(){return this.velocity.get()};a.prototype.getVelocity1D=function S(){return this.velocity.x};a.prototype.setMass=function T(t){this.mass=t;this.inverseMass=1/t};a.prototype.getMass=function x(){return this.mass};a.prototype.reset=function w(t,i){this.setPosition(t||[0,0,0]);this.setVelocity(i||[0,0,0])};a.prototype.applyForce=function E(t){if(t.isZero())return;this.force.add(t).put(this.force);this.wake()};a.prototype.applyImpulse=function b(t){if(t.isZero())return;var i=this.velocity;i.add(t.mult(this.inverseMass)).put(i)};a.prototype.integrateVelocity=function z(t){a.INTEGRATOR.integrateVelocity(this,t)};a.prototype.integratePosition=function M(t){a.INTEGRATOR.integratePosition(this,t)};a.prototype._integrate=function P(t){this.integrateVelocity(t);this.integratePosition(t)};a.prototype.getEnergy=function I(){return.5*this.mass*this.velocity.normSquared()};a.prototype.getTransform=function C(){this._engine.step();var t=this.position;var i=this.axis;var e=this.transform;if(i!==undefined){if(i&~a.AXES.X){t.x=0}if(i&~a.AXES.Y){t.y=0}if(i&~a.AXES.Z){t.z=0}}e[12]=t.x;e[13]=t.y;e[14]=t.z;return e};a.prototype.modify=function F(t){var i=this._spec;i.transform=this.getTransform();i.target=t;return i};function c(){this._eventOutput=new r;this._eventOutput.bindThis(this);r.setOutputHandler(this,this._eventOutput)}a.prototype.emit=function N(t,i){if(!this._eventOutput)return;this._eventOutput.emit(t,i)};a.prototype.on=function D(){c.call(this);return this.on.apply(this,arguments)};a.prototype.removeListener=function A(){c.call(this);return this.removeListener.apply(this,arguments)};a.prototype.pipe=function L(){c.call(this);return this.pipe.apply(this,arguments)};a.prototype.unpipe=function R(){c.call(this);return this.unpipe.apply(this,arguments)};e.exports=a});define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){var n=t("./Constraint");var s=t("famous/math/Vector");function r(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(t)this.setOptions(t);this.pDiff=new s;this.vDiff=new s;this.impulse1=new s;this.impulse2=new s;n.call(this)}r.prototype=Object.create(n.prototype);r.prototype.constructor=r;r.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:undefined};var o=Math.PI;function a(t,i,e){return Math.abs(t.dot(i)/e)}r.prototype.setOptions=function h(t){if(t.anchor!==undefined){if(t.anchor instanceof s)this.options.anchor=t.anchor;if(t.anchor.position instanceof s)this.options.anchor=t.anchor.position;if(t.anchor instanceof Array)this.options.anchor=new s(t.anchor)}if(t.length!==undefined)this.options.length=t.length;if(t.dampingRatio!==undefined)this.options.dampingRatio=t.dampingRatio;if(t.period!==undefined)this.options.period=t.period};r.prototype.setAnchor=function u(t){if(this.options.anchor!==undefined)this.options.anchor=new s;this.options.anchor.set(t)};r.prototype.getEnergy=function c(t,i){var e=this.options;var n=e.length;var s=e.anchor||i.position;var r=Math.pow(2*o/e.period,2);var a=s.sub(t.position).norm()-n;return.5*r*a*a};r.prototype.applyConstraint=function p(t,i,e){var n=this.options;var s=this.pDiff;var r=this.vDiff;var h=this.impulse1;var u=this.impulse2;var c=n.length;var p=n.anchor||i.position;var l=n.period;var f=n.dampingRatio;for(var d=0;d<t.length;d++){var v=t[d];var _=v.position;var y=v.velocity;var g=v.mass;var m=v.inverseMass;s.set(_.sub(p));var O=s.norm()-c;var S;if(i){var T=i.inverseMass;var x=i.velocity;r.set(y.sub(x));S=1/(m+T)}else{r.set(y);S=g}var w;var E;if(this.options.period===0){w=0;E=1}else{var b=4*S*o*o/(l*l);var z=4*S*o*f/l;E=e*b/(z+e*b);w=1/(z+e*b)}var M=E/e*O;s.normalize(-M).sub(r).mult(e/(w+e/S)).put(h);v.applyImpulse(h);if(i){h.mult(-1).put(u);i.applyImpulse(u)}this.setEnergy(a(h,s,e))}};e.exports=r});define("famous/transitions/SnapTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(t,i,e){var n=t("famous/physics/PhysicsEngine");var s=t("famous/physics/bodies/Particle");var r=t("famous/physics/constraints/Snap");var o=t("famous/math/Vector");function a(t){t=t||0;this.endState=new o(t);this.initState=new o;this._dimensions=1;this._restTolerance=1e-10;this._absRestTolerance=this._restTolerance;this._callback=undefined;this.PE=new n;this.particle=new s;this.spring=new r({anchor:this.endState});this.PE.addBody(this.particle);this.PE.attach(this.spring,this.particle)}a.SUPPORTS_MULTIPLE=3;a.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0};function h(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function u(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=t===0?this._restTolerance:this._restTolerance*t}function c(t){this.endState.set(t);u.call(this)}function p(){this.PE.wake()}function l(){this.PE.sleep()}function f(t){this.particle.position.set(t)}function d(t){this.particle.velocity.set(t)}function v(){return this._dimensions===0?this.particle.getPosition1D():this.particle.getPosition()}function _(){return this._dimensions===0?this.particle.getVelocity1D():this.particle.getVelocity()}function y(t){this._callback=t}function g(t){var i=a.DEFAULT_OPTIONS;if(t.period===undefined)t.period=i.period;if(t.dampingRatio===undefined)t.dampingRatio=i.dampingRatio;if(t.velocity===undefined)t.velocity=i.velocity;this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio});d.call(this,t.velocity)}function m(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=undefined;t()}return}if(h.call(this)<this._absRestTolerance){f.call(this,this.endState);d.call(this,[0,0,0]);l.call(this)}}a.prototype.reset=function O(t,i){this._dimensions=t instanceof Array?t.length:0;this.initState.set(t);f.call(this,t);c.call(this,t);if(i)d.call(this,i);y.call(this,undefined)};a.prototype.getVelocity=function S(){return _.call(this)};a.prototype.setVelocity=function T(t){this.call(this,d(t))};a.prototype.isActive=function x(){return!this.PE.isSleeping()};a.prototype.halt=function w(){this.set(this.get())};a.prototype.get=function E(){m.call(this);return v.call(this)};a.prototype.set=function b(t,i,e){if(!i){this.reset(t);if(e)e();return}this._dimensions=t instanceof Array?t.length:0;p.call(this);g.call(this,i);c.call(this,t);y.call(this,e)};e.exports=a});define("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,i,e){var n=t("famous/math/Vector");var s=t("famous/core/EventHandler");function r(t){this.force=new n(t);this._energy=0;this._eventOutput=null}r.prototype.setOptions=function a(t){for(var i in t)this.options[i]=t[i]};r.prototype.applyForce=function h(t){t.applyForce(this.force)};r.prototype.getEnergy=function u(){return this._energy};r.prototype.setEnergy=function c(t){this._energy=t};function o(){this._eventOutput=new s;this._eventOutput.bindThis(this);s.setOutputHandler(this,this._eventOutput)}r.prototype.on=function p(){o.call(this);return this.on.apply(this,arguments)};r.prototype.addListener=function l(){o.call(this);return this.addListener.apply(this,arguments)};r.prototype.pipe=function f(){o.call(this);return this.pipe.apply(this,arguments)};r.prototype.removeListener=function d(){return this.removeListener.apply(this,arguments)};r.prototype.unpipe=function v(){return this.unpipe.apply(this,arguments)};e.exports=r});define("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,i,e){var n=t("./Force");var s=t("famous/math/Vector");function r(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(t)this.setOptions(t);this.disp=new s(0,0,0);p.call(this);n.call(this)}r.prototype=Object.create(n.prototype);r.prototype.constructor=r;var o=Math.PI;r.FORCE_FUNCTIONS={FENE:function(t,i){var e=i*.99;var n=Math.max(Math.min(t,e),-e);return n/(1-n*n/(i*i))},HOOK:function(t){return t}};r.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:Infinity,anchor:undefined,forceFunction:r.FORCE_FUNCTIONS.HOOK};function a(t){this.forceFunction=t}function h(){var t=this.options;t.stiffness=Math.pow(2*o/t.period,2)}function u(){var t=this.options;t.damping=4*o*t.dampingRatio/t.period}function c(t,i){return.5*t*i*i}function p(){a.call(this,this.options.forceFunction);h.call(this);u.call(this)}r.prototype.setOptions=function l(t){if(t.anchor!==undefined){if(t.anchor.position instanceof s)this.options.anchor=t.anchor.position;if(t.anchor instanceof s)this.options.anchor=t.anchor;if(t.anchor instanceof Array)this.options.anchor=new s(t.anchor)}if(t.period!==undefined)this.options.period=t.period;if(t.dampingRatio!==undefined)this.options.dampingRatio=t.dampingRatio;if(t.length!==undefined)this.options.length=t.length;if(t.forceFunction!==undefined)this.options.forceFunction=t.forceFunction;if(t.maxLength!==undefined)this.options.maxLength=t.maxLength;p.call(this)};r.prototype.applyForce=function f(t,i){var e=this.force;var n=this.disp;var s=this.options;var r=s.stiffness;var o=s.damping;var a=s.length;var h=s.maxLength;var u=s.anchor||i.position;for(var p=0;p<t.length;p++){var l=t[p];var f=l.position;var d=l.velocity;u.sub(f).put(n);var v=n.norm()-a;if(v===0)return;var _=l.mass;r*=_;o*=_;n.normalize(r*this.forceFunction(v,h)).put(e);if(o)if(i)e.add(d.sub(i.velocity).mult(-o)).put(e);else e.add(d.mult(-o)).put(e);l.applyForce(e);if(i)i.applyForce(e.mult(-1));this.setEnergy(c(r,v))}};r.prototype.getEnergy=function d(t){var i=this.options;var e=i.length;var n=i.anchor;var s=i.stiffness;var r=n.sub(t.position).norm()-e;return.5*s*r*r};r.prototype.setAnchor=function v(t){if(!this.options.anchor)this.options.anchor=new s;this.options.anchor.set(t)};e.exports=r});define("famous/transitions/SpringTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/math/Vector"],function(t,i,e){var n=t("famous/physics/PhysicsEngine");var s=t("famous/physics/bodies/Particle");var r=t("famous/physics/forces/Spring");var o=t("famous/math/Vector");function a(t){t=t||0;this.endState=new o(t);this.initState=new o;this._dimensions=undefined;this._restTolerance=1e-10;this._absRestTolerance=this._restTolerance;this._callback=undefined;this.PE=new n;this.spring=new r({anchor:this.endState});this.particle=new s;this.PE.addBody(this.particle);this.PE.attach(this.spring,this.particle)}a.SUPPORTS_MULTIPLE=3;a.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0};function h(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function u(t){this.particle.setPosition(t)}function c(t){this.particle.setVelocity(t)}function p(){return this._dimensions===0?this.particle.getPosition1D():this.particle.getPosition()}function l(){return this._dimensions===0?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(){this.PE.wake()}function v(){this.PE.sleep()}function _(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=undefined;t()}return}if(h.call(this)<this._absRestTolerance){u.call(this,this.endState);c.call(this,[0,0,0]);v.call(this)}}function y(t){var i=a.DEFAULT_OPTIONS;if(t.period===undefined)t.period=i.period;if(t.dampingRatio===undefined)t.dampingRatio=i.dampingRatio;if(t.velocity===undefined)t.velocity=i.velocity;if(t.period<150){t.period=150;console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")}this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio});c.call(this,t.velocity)}function g(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=t===0?this._restTolerance:this._restTolerance*t}function m(t){this.endState.set(t);g.call(this)}a.prototype.reset=function O(t,i){this._dimensions=t instanceof Array?t.length:0;this.initState.set(t);u.call(this,t);m.call(this,t);if(i)c.call(this,i);f.call(this,undefined)};a.prototype.getVelocity=function S(){return l.call(this)};a.prototype.setVelocity=function T(t){this.call(this,c(t))};a.prototype.isActive=function x(){return!this.PE.isSleeping()};a.prototype.halt=function w(){this.set(this.get())};a.prototype.get=function E(){_.call(this);return p.call(this)};a.prototype.set=function b(t,i,e){if(!i){this.reset(t);if(e)e();return}this._dimensions=t instanceof Array?t.length:0;d.call(this);y.call(this,i);m.call(this,t);f.call(this,e)};e.exports=a});define("famous/physics/constraints/Wall",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){var n=t("./Constraint");var s=t("famous/math/Vector");function r(t){this.options=Object.create(r.DEFAULT_OPTIONS);if(t)this.setOptions(t);this.diff=new s;this.impulse=new s;n.call(this)}r.prototype=Object.create(n.prototype);r.prototype.constructor=r;r.ON_CONTACT={REFLECT:0,SILENT:1};r.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:r.ON_CONTACT.REFLECT};r.prototype.setOptions=function c(t){if(t.normal!==undefined){if(t.normal instanceof s)this.options.normal=t.normal.clone();if(t.normal instanceof Array)this.options.normal=new s(t.normal)}if(t.restitution!==undefined)this.options.restitution=t.restitution;if(t.drift!==undefined)this.options.drift=t.drift;if(t.slop!==undefined)this.options.slop=t.slop;if(t.distance!==undefined)this.options.distance=t.distance;if(t.onContact!==undefined)this.options.onContact=t.onContact};function o(t,i){return i.dot(t)}function a(t){var i=this.options.normal;var e=this.options.distance;return t.dot(i)+e}function h(t,i,e){var n=t.position;var s=t.velocity;var o=t.mass;var a=this.options.normal;var h=this.options.onContact;var u=this.options.restitution;var c=this.impulse;var p=this.options.drift;var l=-this.options.slop;var f=0;if(this._eventOutput){var d={particle:t,wall:this,overlap:i,normal:a};this._eventOutput.emit("preCollision",d);this._eventOutput.emit("collision",d)}switch(h){case r.ON_CONTACT.REFLECT:var v=i<l?-((1+u)*a.dot(s)+p/e*(i-l))/(o*e+f):-((1+u)*a.dot(s))/(o*e+f);c.set(a.mult(e*v));t.applyImpulse(c);t.setPosition(n.add(a.mult(-i)));break}if(this._eventOutput)this._eventOutput.emit("postCollision",d)}function u(t,i,e){var n=this.options.onContact;var s=t.position;var o=this.options.normal;if(n===r.ON_CONTACT.REFLECT){t.setPosition(s.add(o.mult(-i)))}}r.prototype.applyConstraint=function p(t,i,e){var n=this.options.normal;for(var s=0;s<t.length;s++){var r=t[s];var c=r.position;var p=r.velocity;var l=r.radius||0;var f=a.call(this,c.add(n.mult(-l)));var d=o.call(this,n,p);if(f<=0){if(d<0)h.call(this,r,f,e);else u.call(this,r,f,e)}}};e.exports=r});define("famous/transitions/WallTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/physics/constraints/Wall","famous/math/Vector"],function(t,i,e){var n=t("famous/physics/PhysicsEngine");var s=t("famous/physics/bodies/Particle");var r=t("famous/physics/forces/Spring");var o=t("famous/physics/constraints/Wall");var a=t("famous/math/Vector");function h(t){t=t||0;this.endState=new a(t);this.initState=new a;this.spring=new r({anchor:this.endState});this.wall=new o;this._restTolerance=1e-10;this._dimensions=1;this._absRestTolerance=this._restTolerance;this._callback=undefined;this.PE=new n;this.particle=new s;this.PE.addBody(this.particle);this.PE.attach([this.wall,this.spring],this.particle)}h.SUPPORTS_MULTIPLE=3;h.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,resitution:.5};function u(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function c(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=t===0?this._restTolerance:this._restTolerance*t}function p(){this.PE.wake()}function l(){this.PE.sleep()}function f(t){this.endState.set(t);var i=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:i===0?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)});c.call(this)}function d(t){this.particle.position.set(t)}function v(t){this.particle.velocity.set(t)}function _(){return this._dimensions===0?this.particle.getPosition1D():this.particle.getPosition()}function y(){return this._dimensions===0?this.particle.getVelocity1D():this.particle.getVelocity()}function g(t){this._callback=t}function m(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=undefined;t()}return}var i=u.call(this);if(i<this._absRestTolerance){l.call(this);d.call(this,this.endState);v.call(this,[0,0,0])}}function O(t){var i=h.DEFAULT_OPTIONS;if(t.period===undefined)t.period=i.period;if(t.dampingRatio===undefined)t.dampingRatio=i.dampingRatio;if(t.velocity===undefined)t.velocity=i.velocity;if(t.restitution===undefined)t.restitution=i.restitution;this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio});this.wall.setOptions({restitution:t.restitution});v.call(this,t.velocity)}h.prototype.reset=function S(t,i){this._dimensions=t instanceof Array?t.length:0;this.initState.set(t);d.call(this,t);if(i)v.call(this,i);f.call(this,t);g.call(this,undefined)};h.prototype.getVelocity=function T(){return y.call(this)};h.prototype.setVelocity=function x(t){this.call(this,v(t))};h.prototype.isActive=function w(){return!this.PE.isSleeping()};h.prototype.halt=function E(){this.set(this.get())};h.prototype.get=function b(){m.call(this);return _.call(this)};h.prototype.set=function z(t,i,e){if(!i){this.reset(t);if(e)e();return}this._dimensions=t instanceof Array?t.length:0;p.call(this);O.call(this,i);f.call(this,t);g.call(this,e)};e.exports=h});define("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,i,e){var n=t("famous/core/Surface");var s=t("famous/core/Context");function r(t){n.call(this,t);this._container=document.createElement("div");this._container.classList.add("famous-group");this._container.classList.add("famous-container-group");this._shouldRecalculateSize=false;this.context=new s(this._container);this.setContent(this._container)}r.prototype=Object.create(n.prototype);r.prototype.constructor=r;r.prototype.elementType="div";r.prototype.elementClass="famous-surface";r.prototype.add=function o(){return this.context.add.apply(this.context,arguments)};r.prototype.render=function a(){if(this._sizeDirty)this._shouldRecalculateSize=true;return n.prototype.render.apply(this,arguments)};r.prototype.deploy=function h(){this._shouldRecalculateSize=true;return n.prototype.deploy.apply(this,arguments)};r.prototype.commit=function u(t,i,e,s,r){var o=this._size?[this._size[0],this._size[1]]:null;var a=n.prototype.commit.apply(this,arguments);if(this._shouldRecalculateSize||o&&(this._size[0]!==o[0]||this._size[1]!==o[1])){this.context.setSize();this._shouldRecalculateSize=false}this.context.update();return a};e.exports=r});define("famous/utilities/KeyCodes",["require","exports","module"],function(t,i,e){var n={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};e.exports=n});define("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,i,e){var n=t("famous/core/Engine");var s="prerender";var r=window.performance?function(){return window.performance.now()}:function(){return Date.now()};function o(t){n.on(s,t);return t}function a(t,i){var e=r();var a=function(){var o=r();if(o-e>=i){t.apply(this,arguments);n.removeListener(s,a)}};return o(a)}function h(t,i){var e=r();var n=function(){var n=r();if(n-e>=i){t.apply(this,arguments);e=r()}};return o(n)}function u(t,i){if(i===undefined)return undefined;var e=function(){i--;if(i<=0){t.apply(this,arguments);p(e)}};return o(e)}function c(t,i){i=i||1;var e=i;var n=function(){i--;if(i<=0){t.apply(this,arguments);i=e}};return o(n)}function p(t){n.removeListener(s,t)}function l(t,i){var e;var n;var s;var o;var h;return function(){n=this;h=arguments;s=r();var u=function(){var c=r-s;if(c<i){e=a(u,i-c)}else{e=null;o=t.apply(n,h)}};p(e);e=a(u,i);return o}}e.exports={setTimeout:a,setInterval:h,debounce:l,after:u,every:c,clear:p}});define("famous/views/SequentialLayout",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(t,i,e){var n=t("famous/core/OptionsManager");var s=t("famous/core/Transform");var r=t("famous/core/ViewSequence");var o=t("famous/utilities/Utility");function a(t){this._items=null;this._size=null;this._outputFunction=a.DEFAULT_OUTPUT_FUNCTION;this.options=Object.create(this.constructor.DEFAULT_OPTIONS);this.optionsManager=new n(this.options);this._itemsCache=[];this._outputCache={size:null,target:this._itemsCache};if(t)this.setOptions(t)}a.DEFAULT_OPTIONS={direction:o.Direction.Y,itemSpacing:0,defaultItemSize:[50,50]};a.DEFAULT_OUTPUT_FUNCTION=function h(t,i,e){var n=this.options.direction===o.Direction.X?s.translate(i,0):s.translate(0,i);return{transform:n,target:t.render()}};a.prototype.getSize=function u(){if(!this._size)this.render();return this._size};a.prototype.sequenceFrom=function c(t){if(t instanceof Array)t=new r(t);this._items=t;return this};a.prototype.setOptions=function p(t){this.optionsManager.setOptions.apply(this.optionsManager,arguments);return this};a.prototype.setOutputFunction=function l(t){this._outputFunction=t;return this};a.prototype.render=function f(){var t=0;var i=0;var e=this.options.direction===o.Direction.X?0:1;var n=this.options.direction===o.Direction.X?1:0;var s=this._items;var r=this._itemsCache;var a=0;while(s){var h=s.get();if(!h)break;var u;if(h&&h.getSize)u=h.getSize();if(!u)u=this.options.defaultItemSize;if(u[n]!==true)i=Math.max(i,u[n]);var c=this._outputFunction.call(this,h,t,a);r[a]=c;if(u[e]&&u[e]!==true)t+=u[e]+this.options.itemSpacing;s=s.getNext();a++}this._itemsCache.splice(a);if(!i)i=undefined;if(!this._size)this._size=[0,0];this._size[e]=t-this.options.itemSpacing;this._size[n]=i;this._outputCache.size=this.getSize();return this._outputCache};e.exports=a});define("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,i,e){var n=t("famous/core/Modifier");var s=t("famous/core/RenderNode");var r=t("famous/core/Transform");var o=t("famous/transitions/Transitionable");var a=t("famous/core/View");function h(t){a.apply(this,arguments);this._showing=-1;this._outgoingRenderables=[];this._nextRenderable=null;this._renderables=[];this._nodes=[];this._modifiers=[];this._states=[];this.inTransformMap=h.DefaultMap.transform;this.inOpacityMap=h.DefaultMap.opacity;this.inOriginMap=h.DefaultMap.origin;this.outTransformMap=h.DefaultMap.transform;this.outOpacityMap=h.DefaultMap.opacity;this.outOriginMap=h.DefaultMap.origin;this._output=[]}h.prototype=Object.create(a.prototype);h.prototype.constructor=h;h.DEFAULT_OPTIONS={inTransition:true,outTransition:true,overlap:true};h.DefaultMap={transform:function(){return r.identity},opacity:function(t){return t},origin:null};function u(t,i){return t(i.get())}h.prototype.inTransformFrom=function c(t){if(t instanceof Function)this.inTransformMap=t;else if(t&&t.get)this.inTransformMap=t.get.bind(t);else throw new Error("inTransformFrom takes only function or getter object");return this};h.prototype.inOpacityFrom=function p(t){if(t instanceof Function)this.inOpacityMap=t;else if(t&&t.get)this.inOpacityMap=t.get.bind(t);else throw new Error("inOpacityFrom takes only function or getter object");return this};h.prototype.inOriginFrom=function l(t){if(t instanceof Function)this.inOriginMap=t;else if(t&&t.get)this.inOriginMap=t.get.bind(t);else throw new Error("inOriginFrom takes only function or getter object");return this};h.prototype.outTransformFrom=function f(t){if(t instanceof Function)this.outTransformMap=t;else if(t&&t.get)this.outTransformMap=t.get.bind(t);else throw new Error("inTransformFrom takes only function or getter object");return this};h.prototype.outOpacityFrom=function d(t){if(t instanceof Function)this.outOpacityMap=t;else if(t&&t.get)this.outOpacityMap=t.get.bind(t);else throw new Error("inOpacityFrom takes only function or getter object");return this};h.prototype.outOriginFrom=function v(t){if(t instanceof Function)this.outOriginMap=t;else if(t&&t.get)this.outOriginMap=t.get.bind(t);else throw new Error("inOriginFrom takes only function or getter object");return this};h.prototype.show=function _(t,i,e){if(!t){return this.hide(e)}if(i instanceof Function){e=i;i=null}if(this._showing>=0){if(this.options.overlap)this.hide();else{if(this._nextRenderable){this._nextRenderable=t}else{this._nextRenderable=t;this.hide(function(){if(this._nextRenderable===t)this.show(this._nextRenderable,e);this._nextRenderable=null})}return undefined}}var r=null;var a=this._renderables.indexOf(t);if(a>=0){this._showing=a;r=this._states[a];r.halt();var h=this._outgoingRenderables.indexOf(t);if(h>=0)this._outgoingRenderables.splice(h,1)}else{r=new o(0);var c=new n({transform:this.inTransformMap?u.bind(this,this.inTransformMap,r):null,opacity:this.inOpacityMap?u.bind(this,this.inOpacityMap,r):null,origin:this.inOriginMap?u.bind(this,this.inOriginMap,r):null});
var p=new s;p.add(c).add(t);this._showing=this._nodes.length;this._nodes.push(p);this._modifiers.push(c);this._states.push(r);this._renderables.push(t)}if(!i)i=this.options.inTransition;r.set(1,i,e)};h.prototype.hide=function y(t,i){if(this._showing<0)return;var e=this._showing;this._showing=-1;if(t instanceof Function){i=t;t=undefined}var n=this._nodes[e];var s=this._modifiers[e];var r=this._states[e];var o=this._renderables[e];s.transformFrom(this.outTransformMap?u.bind(this,this.outTransformMap,r):null);s.opacityFrom(this.outOpacityMap?u.bind(this,this.outOpacityMap,r):null);s.originFrom(this.outOriginMap?u.bind(this,this.outOriginMap,r):null);if(this._outgoingRenderables.indexOf(o)<0)this._outgoingRenderables.push(o);if(!t)t=this.options.outTransition;r.halt();r.set(0,t,function(t,e,n,s){if(this._outgoingRenderables.indexOf(s)>=0){var r=this._nodes.indexOf(t);this._nodes.splice(r,1);this._modifiers.splice(r,1);this._states.splice(r,1);this._renderables.splice(r,1);this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1);if(this._showing>=r)this._showing--}if(i)i.call(this)}.bind(this,n,s,r,o))};h.prototype.render=function g(){var t=this._output;if(t.length>this._nodes.length)t.splice(this._nodes.length);for(var i=0;i<this._nodes.length;i++){t[i]=this._nodes[i].render()}return t};e.exports=h});define("famous/views/GridLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/ViewSequence","famous/core/EventHandler","famous/core/Modifier","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){var n=t("famous/core/Entity");var s=t("famous/core/RenderNode");var r=t("famous/core/Transform");var o=t("famous/core/ViewSequence");var a=t("famous/core/EventHandler");var h=t("famous/core/Modifier");var u=t("famous/core/OptionsManager");var c=t("famous/transitions/Transitionable");var p=t("famous/transitions/TransitionableTransform");function l(t){this.options=Object.create(l.DEFAULT_OPTIONS);this.optionsManager=new u(this.options);if(t)this.setOptions(t);this.id=n.register(this);this._modifiers=[];this._states=[];this._contextSizeCache=[0,0];this._dimensionsCache=[0,0];this._activeCount=0;this._eventOutput=new a;a.setOutputHandler(this,this._eventOutput)}function f(t,i,e){var n=[t[0],t[1]];n[0]-=this.options.gutterSize[0]*(i-1);n[1]-=this.options.gutterSize[1]*(e-1);var s=Math.round(n[1]/e);var r=Math.round(n[0]/i);var o=0;var a;var h=0;for(var u=0;u<e;u++){a=0;for(var c=0;c<i;c++){if(this._modifiers[h]===undefined){d.call(this,h,[r,s],[a,o,0],1)}else{v.call(this,h,[r,s],[a,o,0],1)}h++;a+=r+this.options.gutterSize[0]}o+=s+this.options.gutterSize[1]}this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]];this._contextSizeCache=[t[0],t[1]];this._activeCount=e*i;for(u=this._activeCount;u<this._modifiers.length;u++)v.call(this,u,[Math.round(r),Math.round(s)],[0,0],0);this._eventOutput.emit("reflow")}function d(t,i,e,n){var s={transform:new p(r.translate.apply(null,e)),opacity:new c(n),size:new c(i)};var o=new h({transform:s.transform,opacity:s.opacity,size:s.size});this._states[t]=s;this._modifiers[t]=o}function v(t,i,e,n){var s=this._states[t];var r=s.size;var o=s.opacity;var a=s.transform;var h=this.options.transition;a.halt();o.halt();r.halt();a.setTranslate(e,h);r.set(i,h);o.set(n,h)}l.DEFAULT_OPTIONS={dimensions:[1,1],transition:false,gutterSize:[0,0]};l.prototype.render=function _(){return this.id};l.prototype.setOptions=function y(t){return this.optionsManager.setOptions(t)};l.prototype.sequenceFrom=function g(t){if(t instanceof Array)t=new o(t);this.sequence=t};l.prototype.commit=function m(t){var i=t.transform;var e=t.opacity;var n=t.origin;var s=t.size;var o=this.options.dimensions[0];var a=this.options.dimensions[1];if(s[0]!==this._contextSizeCache[0]||s[1]!==this._contextSizeCache[1]||o!==this._dimensionsCache[0]||a!==this._dimensionsCache[1]){f.call(this,s,o,a)}var h=this.sequence;var u=[];var c=0;while(h&&c<this._modifiers.length){var p=h.get();var l=this._modifiers[c];if(c>=this._activeCount&&this._states[c].opacity.isActive()){this._modifiers.splice(c,1);this._states.splice(c,1)}if(p){u.push(l.modify({origin:n,target:p.render()}))}h=h.getNext();c++}if(s)i=r.moveThen([-s[0]*n[0],-s[1]*n[1],0],i);return{transform:i,opacity:e,size:s,target:u}};e.exports=l});define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,i,e){var n=t("./Force");function s(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(t)this.setOptions(t);n.call(this)}s.prototype=Object.create(n.prototype);s.prototype.constructor=s;s.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}};s.DEFAULT_OPTIONS={strength:.01,forceFunction:s.FORCE_FUNCTIONS.LINEAR};s.prototype.applyForce=function r(t){var i=this.options.strength;var e=this.options.forceFunction;var n=this.force;for(var s=0;s<t.length;s++){var r=t[s];e(r.velocity).mult(-i).put(n);r.applyForce(n)}};s.prototype.setOptions=function o(t){for(var i in t)this.options[i]=t[i]};e.exports=s});define("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,i,e){var n=t("famous/core/Entity");var s=t("famous/core/Group");var r=t("famous/core/OptionsManager");var o=t("famous/core/Transform");var a=t("famous/utilities/Utility");var h=t("famous/core/ViewSequence");var u=t("famous/core/EventHandler");function c(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);this._optionsManager=new r(this.options);if(t)this._optionsManager.setOptions(t);this._node=null;this._position=0;this._positionOffset=0;this._positionGetter=null;this._outputFunction=null;this._masterOutputFunction=null;this.outputFrom();this._onEdge=0;this.group=new s;this.group.add({render:v.bind(this)});this._entityId=n.register(this);this._size=[undefined,undefined];this._contextSize=[undefined,undefined];this._eventInput=new u;this._eventOutput=new u;u.setInputHandler(this,this._eventInput);u.setOutputHandler(this,this._eventOutput)}c.DEFAULT_OPTIONS={direction:a.Direction.Y,margin:0,clipSize:undefined,groupScroll:false};function p(t){if(!t)t=this._contextSize;var i=this.options.direction===a.Direction.X?0:1;return t[i]===undefined?this._contextSize[i]:t[i]}function l(t,i,e){var n=t.getSize?t.getSize():this._contextSize;var s=this._outputFunction(i);e.push({transform:s,target:t.render()});return p.call(this,n)}function f(){if(this.options.clipSize)return this.options.clipSize;else return p.call(this,this._contextSize)}c.prototype.setOptions=function _(t){this._optionsManager.setOptions(t);if(this.options.groupScroll){this.group.pipe(this._eventOutput)}else{this.group.unpipe(this._eventOutput)}};c.prototype.onEdge=function y(){return this._onEdge};c.prototype.outputFrom=function g(t,i){if(!t){t=function(t){return this.options.direction===a.Direction.X?o.translate(t,0):o.translate(0,t)}.bind(this);if(!i)i=t}this._outputFunction=t;this._masterOutputFunction=i?i:function(i){return o.inverse(t(-i))}};c.prototype.positionFrom=function m(t){if(t instanceof Function)this._positionGetter=t;else if(t&&t.get)this._positionGetter=t.get.bind(t);else{this._positionGetter=null;this._position=t}if(this._positionGetter)this._position=this._positionGetter.call(this)};c.prototype.sequenceFrom=function O(t){if(t instanceof Array)t=new h({array:t});this._node=t;this._positionOffset=0};c.prototype.getSize=function S(t){return t?this._contextSize:this._size};c.prototype.render=function T(){if(!this._node)return null;if(this._positionGetter)this._position=this._positionGetter.call(this);return this._entityId};c.prototype.commit=function x(t){var i=t.transform;var e=t.opacity;var n=t.origin;var s=t.size;if(!this.options.clipSize&&(s[0]!==this._contextSize[0]||s[1]!==this._contextSize[1])){this._onEdge=0;this._contextSize[0]=s[0];this._contextSize[1]=s[1];if(this.options.direction===a.Direction.X){this._size[0]=f.call(this);this._size[1]=undefined}else{this._size[0]=undefined;this._size[1]=f.call(this)}}var r=this._masterOutputFunction(-this._position);return{transform:o.multiply(i,r),size:s,opacity:e,origin:n,target:this.group.render()}};function d(){var t=p.call(this,this._node.getSize());var i=this._node&&this._node.getNext?this._node.getNext():null;while(i&&this._position+this._positionOffset>=t){this._positionOffset-=t;this._node=i;t=p.call(this,this._node.getSize());i=this._node&&this._node.getNext?this._node.getNext():null}var e=this._node&&this._node.getPrevious?this._node.getPrevious():null;while(e&&this._position+this._positionOffset<0){var n=p.call(this,e.getSize());this._positionOffset+=n;this._node=e;e=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function v(){var t=null;var i=this._position;var e=[];this._onEdge=0;var n=-this._positionOffset;var s=f.call(this);var r=this._node;while(r&&n-i<s+this.options.margin){n+=l.call(this,r,n,e);r=r.getNext?r.getNext():null}var o=this._node;var a=p.call(this,o.getSize());if(n<s){while(o&&a<s){o=o.getPrevious();if(o)a+=p.call(this,o.getSize())}o=this._node;while(o&&a<s){o=o.getNext();if(o)a+=p.call(this,o.getSize())}}var h=a!==undefined&&a<s?a:s;if(!r&&n-i<=h){this._onEdge=1;this._eventOutput.emit("edgeHit",{position:n-h})}else if(!this._node.getPrevious()&&i<=0){this._onEdge=-1;this._eventOutput.emit("edgeHit",{position:0})}r=this._node&&this._node.getPrevious?this._node.getPrevious():null;n=-this._positionOffset;if(r){t=r.getSize?r.getSize():this._contextSize;n-=p.call(this,t)}while(r&&n-i>-(f.call(this)+this.options.margin)){l.call(this,r,n,e);r=r.getPrevious?r.getPrevious():null;if(r){t=r.getSize?r.getSize():this._contextSize;n-=p.call(this,t)}}d.call(this);return e}e.exports=c});define("famous/views/Scrollview",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,i,e){var n=t("famous/physics/PhysicsEngine");var s=t("famous/physics/bodies/Particle");var r=t("famous/physics/forces/Drag");var o=t("famous/physics/forces/Spring");var a=t("famous/core/EventHandler");var h=t("famous/core/OptionsManager");var u=t("famous/core/ViewSequence");var c=t("famous/views/Scroller");var p=t("famous/utilities/Utility");var l=t("famous/inputs/GenericSync");var f=t("famous/inputs/ScrollSync");var d=t("famous/inputs/TouchSync");l.register({scroll:f,touch:d});function v(t){this.options=Object.create(v.DEFAULT_OPTIONS);this._optionsManager=new h(this.options);this._node=null;this._physicsEngine=new n;this._particle=new s;this._physicsEngine.addBody(this._particle);this.spring=new o({anchor:[0,0,0]});this.drag=new r({forceFunction:r.FORCE_FUNCTIONS.QUADRATIC});this.friction=new r({forceFunction:r.FORCE_FUNCTIONS.LINEAR});this.sync=new l(["scroll","touch"],{direction:this.options.direction});this._eventInput=new a;this._eventOutput=new a;this._eventInput.pipe(this.sync);this.sync.pipe(this._eventInput);a.setInputHandler(this,this._eventInput);a.setOutputHandler(this,this._eventOutput);this._touchCount=0;this._springState=0;this._onEdge=0;this._pageSpringPosition=0;this._edgeSpringPosition=0;this._touchVelocity=undefined;this._earlyEnd=false;this._needsPaginationCheck=false;this._scroller=new c;this._scroller.positionFrom(this.getPosition.bind(this));this.setOptions(t);S.call(this)}var _=.5;v.DEFAULT_OPTIONS={direction:p.Direction.Y,rails:true,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:false,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:false};var y={NONE:0,EDGE:1,PAGE:2};function g(t){this._touchCount=t.count;if(t.count===undefined)this._touchCount=1;x.call(this);this.setVelocity(0);this._touchVelocity=0;this._earlyEnd=false}function m(t){var i=-t.velocity;var e=-t.delta;if(this._onEdge&&t.slip){if(i<0&&this._onEdge<0||i>0&&this._onEdge>0){if(!this._earlyEnd){O.call(this,t);this._earlyEnd=true}}else if(this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())){g.call(this,t)}}if(this._earlyEnd)return;this._touchVelocity=i;if(t.slip)this.setVelocity(i);else this.setPosition(this.getPosition()+e)}function O(t){this._touchCount=t.count||0;if(!this._touchCount){x.call(this);if(this._onEdge)z.call(this,this._edgeSpringPosition,y.EDGE);T.call(this);var i=-t.velocity;var e=this.options.speedLimit;if(t.slip)e*=this.options.edgeGrip;if(i<-e)i=-e;else if(i>e)i=e;this.setVelocity(i);this._touchVelocity=undefined;this._needsPaginationCheck=true}}function S(){this._eventInput.bindThis(this);this._eventInput.on("start",g);this._eventInput.on("update",m);this._eventInput.on("end",O);this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function T(){if(this._springState)this._physicsEngine.attach([this.spring],this._particle);else this._physicsEngine.attach([this.drag,this.friction],this._particle)}function x(){this._springState=y.NONE;this._physicsEngine.detachAll()}function w(t){var i=this.options.direction;var e=(t.getSize()||this._scroller.getSize())[i];if(!e)e=this._scroller.getSize()[i];return e}function E(t){if(!this._onEdge&&t){this.sync.setOptions({scale:this.options.edgeGrip});if(!this._touchCount&&this._springState!==y.EDGE){z.call(this,this._edgeSpringPosition,y.EDGE)}}else if(this._onEdge&&!t){this.sync.setOptions({scale:1});if(this._springState&&Math.abs(this.getVelocity())<.001){x.call(this);T.call(this)}}this._onEdge=t}function b(){if(!this._needsPaginationCheck)return;if(this._touchCount)return;if(this._springState===y.EDGE)return;var t=this.getVelocity();if(Math.abs(t)>=this.options.pageStopSpeed)return;var i=this.getPosition();var e=Math.abs(t)>this.options.pageSwitchSpeed;var n=w.call(this,this._node);var s=i>.5*n;var r=t>0;if(s&&!e||e&&r)this.goToNextPage();else z.call(this,0,y.PAGE);this._needsPaginationCheck=false}function z(t,i){var e;if(i===y.EDGE){this._edgeSpringPosition=t;e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}}else if(i===y.PAGE){this._pageSpringPosition=t;e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}}this.spring.setOptions(e);if(i&&!this._springState){x.call(this);this._springState=i;T.call(this)}this._springState=i}function M(){var t=this.getPosition();var i=w.call(this,this._node);var e=this._node.getNext();while(t>i+_&&e){P.call(this,-i);t-=i;this._scroller.sequenceFrom(e);this._node=e;e=this._node.getNext();i=w.call(this,this._node)}var n=this._node.getPrevious();var s;while(t<-_&&n){s=w.call(this,n);this._scroller.sequenceFrom(n);this._node=n;P.call(this,s);t+=s;n=this._node.getPrevious()}}function P(t){this._edgeSpringPosition+=t;this._pageSpringPosition+=t;this.setPosition(this.getPosition()+t);if(this._springState===y.EDGE){this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]})}else if(this._springState===y.PAGE){this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}}v.prototype.outputFrom=function I(){return this._scroller.outputFrom.apply(this._scroller,arguments)};v.prototype.getPosition=function C(){return this._particle.getPosition1D()};v.prototype.setPosition=function F(t){this._particle.setPosition1D(t)};v.prototype.getVelocity=function N(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()};v.prototype.setVelocity=function D(t){this._particle.setVelocity1D(t)};v.prototype.setOptions=function A(t){if(t){if(t.direction!==undefined){if(t.direction==="x")t.direction=p.Direction.X;else if(t.direction==="y")t.direction=p.Direction.Y}this._scroller.setOptions(t);this._optionsManager.setOptions(t)}this._scroller.setOptions(this.options);if(this.options.groupScroll)this._scroller.pipe(this._eventInput);else this._scroller.unpipe(this._eventInput);this.drag.setOptions({strength:this.options.drag});this.friction.setOptions({strength:this.options.friction});this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp});this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===p.Direction.X?l.DIRECTION_X:l.DIRECTION_Y})};v.prototype.goToPreviousPage=function L(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var i=this.getPosition();var e=w.call(this,t);this._scroller.sequenceFrom(t);this._node=t;var n=i<_?-e:0;z.call(this,n,y.PAGE);P.call(this,e)}this._eventOutput.emit("pageChange",{direction:-1});return t};v.prototype.goToNextPage=function R(){if(!this._node)return null;var t=this._node.getNext();if(t){var i=this.getPosition();var e=w.call(this,this._node);var n=w.call(this,t);this._scroller.sequenceFrom(t);this._node=t;var s=i>e-_?e+n:e;z.call(this,s,y.PAGE);P.call(this,-e)}this._eventOutput.emit("pageChange",{direction:1});return t};v.prototype.sequenceFrom=function k(t){if(t instanceof Array)t=new u({array:t});this._node=t;return this._scroller.sequenceFrom(t)};v.prototype.getSize=function q(){return this._scroller.getSize.apply(this._scroller,arguments)};v.prototype.render=function H(){if(!this._node)return null;M.call(this);E.call(this,this._scroller.onEdge());if(this.options.paginated)b.call(this);return this._scroller.render()};e.exports=v});define("famous/views/ScrollContainer",["require","exports","module","famous/surfaces/ContainerSurface","famous/core/EventHandler","./Scrollview","famous/utilities/Utility","famous/core/OptionsManager"],function(t,i,e){var n=t("famous/surfaces/ContainerSurface");var s=t("famous/core/EventHandler");var r=t("./Scrollview");var o=t("famous/utilities/Utility");var a=t("famous/core/OptionsManager");function h(t){this.options=Object.create(h.DEFAULT_OPTIONS);this._optionsManager=new a(this.options);if(t)this.setOptions(t);this.container=new n(this.options.container);this.scrollview=new r(this.options.scrollview);this.container.add(this.scrollview);s.setInputHandler(this,this.scrollview);s.setOutputHandler(this,this.scrollview);this.scrollview.subscribe(this.container)}h.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{direction:o.Direction.X}};h.prototype.setOptions=function u(t){return this._optionsManager.setOptions(t)};h.prototype.sequenceFrom=function c(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)};h.prototype.render=function p(){return this.container.render.apply(this.container,arguments)};e.exports=h});define("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(t,i,e){var n=t("famous/core/EventHandler");function s(t,i){this._eventInput=new n;this._eventOutput=new n;n.setInputHandler(this,this._eventInput);n.setOutputHandler(this,this._eventOutput);this._syncs={};if(t)this.addSync(t);if(i)this.setOptions(i)}s.DIRECTION_X=0;s.DIRECTION_Y=1;s.DIRECTION_Z=2;var r={};s.register=function a(t){for(var i in t){if(r[i]){if(r[i]===t[i])return;else throw new Error("this key is registered to a different sync class")}else r[i]=t[i]}};s.prototype.setOptions=function(t){for(var i in this._syncs){this._syncs[i].setOptions(t)}};s.prototype.pipeSync=function h(t){var i=this._syncs[t];this._eventInput.pipe(i);i.pipe(this._eventOutput)};s.prototype.unpipeSync=function u(t){var i=this._syncs[t];this._eventInput.unpipe(i);i.unpipe(this._eventOutput)};function o(t,i){if(!r[t])return;this._syncs[t]=new r[t](i);this.pipeSync(t)}s.prototype.addSync=function c(t){if(t instanceof Array)for(var i=0;i<t.length;i++)o.call(this,t[i]);else if(t instanceof Object)for(var e in t)o.call(this,e,t[e])};e.exports=s});define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,i,e){var n=t("./TouchTracker");var s=t("famous/core/EventHandler");function r(t){this.options=Object.create(r.DEFAULT_OPTIONS);if(t)this.setOptions(t);this._eventOutput=new s;this._touchTracker=new n;s.setOutputHandler(this,this._eventOutput);s.setInputHandler(this,this._touchTracker);this._touchTracker.on("trackstart",a.bind(this));this._touchTracker.on("trackmove",h.bind(this));this._touchTracker.on("trackend",u.bind(this));this._payload={delta:null,position:null,velocity:null,clientX:undefined,clientY:undefined,count:0,touch:undefined};this._position=null}r.DEFAULT_OPTIONS={direction:undefined,rails:false,scale:1};r.DIRECTION_X=0;r.DIRECTION_Y=1;var o=8;function a(t){var i;var e;if(this.options.direction!==undefined){this._position=0;i=0;e=0}else{this._position=[0,0];i=[0,0];e=[0,0]}var n=this._payload;n.delta=e;n.position=this._position;n.velocity=i;n.clientX=t.x;n.clientY=t.y;n.count=t.count;n.touch=t.identifier;this._eventOutput.emit("start",n)}function h(t){var i=t.history;var e=i[i.length-1];var n=i[i.length-2];var s=n.timestamp;var a=e.timestamp;var h=e.x-n.x;var u=e.y-n.y;if(this.options.rails){if(Math.abs(h)>Math.abs(u))u=0;else h=0}var c=Math.max(a-s,o);var p=h/c;var l=u/c;var f=this.options.scale;var d;var v;if(this.options.direction===r.DIRECTION_X){v=f*h;d=f*p;this._position+=v}else if(this.options.direction===r.DIRECTION_Y){v=f*u;d=f*l;this._position+=v}else{v=[f*h,f*u];d=[f*p,f*l];this._position[0]+=v[0];this._position[1]+=v[1]}var _=this._payload;_.delta=v;_.velocity=d;_.position=this._position;_.clientX=t.x;_.clientY=t.y;_.count=t.count;_.touch=t.identifier;this._eventOutput.emit("update",_)}function u(t){this._payload.count=t.count;this._eventOutput.emit("end",this._payload)}r.prototype.setOptions=function c(t){if(t.direction!==undefined)this.options.direction=t.direction;if(t.rails!==undefined)this.options.rails=t.rails;if(t.scale!==undefined)this.options.scale=t.scale};r.prototype.getOptions=function p(){return this.options};e.exports=r});define("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,i,e){var n=t("famous/core/EventHandler");var s=t("famous/core/Engine");function r(t){this.options=Object.create(r.DEFAULT_OPTIONS);if(t)this.setOptions(t);this._payload={delta:null,position:null,velocity:null,slip:true};this._eventInput=new n;this._eventOutput=new n;n.setInputHandler(this,this._eventInput);n.setOutputHandler(this,this._eventOutput);this._position=this.options.direction===undefined?[0,0]:0;this._prevTime=undefined;this._prevVel=undefined;this._eventInput.on("mousewheel",u.bind(this));this._eventInput.on("wheel",u.bind(this));this._inProgress=false;this._loopBound=false}r.DEFAULT_OPTIONS={direction:undefined,minimumEndSpeed:Infinity,rails:false,scale:1,stallTime:50,lineHeight:40};r.DIRECTION_X=0;r.DIRECTION_Y=1;var o=8;var a=Date.now;function h(){if(this._inProgress&&a()-this._prevTime>this.options.stallTime){this._position=this.options.direction===undefined?[0,0]:0;this._inProgress=false;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0;var i=this._payload;i.position=this._position;i.velocity=t;i.slip=true;this._eventOutput.emit("end",i)}}function u(t){t.preventDefault();if(!this._inProgress){this._inProgress=true;_=this._payload;_.slip=true;_.position=this._position;_.clientX=t.clientX;_.clientY=t.clientY;_.offsetX=t.offsetX;_.offsetY=t.offsetY;this._eventOutput.emit("start",_);if(!this._loopBound){s.on("prerender",h.bind(this));this._loopBound=true}}var i=a();var e=this._prevTime||i;var n=t.wheelDeltaX!==undefined?t.wheelDeltaX:-t.deltaX;var u=t.wheelDeltaY!==undefined?t.wheelDeltaY:-t.deltaY;if(t.deltaMode===1){n*=this.options.lineHeight;u*=this.options.lineHeight}if(this.options.rails){if(Math.abs(n)>Math.abs(u))u=0;else n=0}var c=Math.max(i-e,o);var p=n/c;var l=u/c;var f=this.options.scale;var d;var v;if(this.options.direction===r.DIRECTION_X){v=f*n;d=f*p;this._position+=v}else if(this.options.direction===r.DIRECTION_Y){v=f*u;d=f*l;this._position+=v}else{v=[f*n,f*u];d=[f*p,f*l];this._position[0]+=v[0];this._position[1]+=v[1]}var _=this._payload;_.delta=v;_.velocity=d;_.position=this._position;_.slip=true;this._eventOutput.emit("update",_);this._prevTime=i;this._prevVel=d}r.prototype.getOptions=function c(){return this.options};r.prototype.setOptions=function p(t){if(t.direction!==undefined)this.options.direction=t.direction;if(t.minimumEndSpeed!==undefined)this.options.minimumEndSpeed=t.minimumEndSpeed;if(t.rails!==undefined)this.options.rails=t.rails;if(t.scale!==undefined)this.options.scale=t.scale;if(t.stallTime!==undefined)this.options.stallTime=t.stallTime};e.exports=r});define("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,i,e){var n=t("famous/core/EventHandler");var s=Date.now;function r(t,i,e){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:i.origin,timestamp:s(),count:i.touches.length,history:e}}function o(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];var n=r(e,t,null);this.eventOutput.emit("trackstart",n);if(!this.selective&&!this.touchHistory[e.identifier])this.track(n)}}function a(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];var n=this.touchHistory[e.identifier];if(n){var s=r(e,t,n);this.touchHistory[e.identifier].push(s);this.eventOutput.emit("trackmove",s)}}}function h(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];var n=this.touchHistory[e.identifier];if(n){var s=r(e,t,n);this.eventOutput.emit("trackend",s);delete this.touchHistory[e.identifier]}}}function u(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i});delete this.touchHistory[t]}}function c(t){this.selective=t;this.touchHistory={};this.eventInput=new n;this.eventOutput=new n;n.setInputHandler(this,this.eventInput);n.setOutputHandler(this,this.eventOutput);this.eventInput.on("touchstart",o.bind(this));this.eventInput.on("touchmove",a.bind(this));this.eventInput.on("touchend",h.bind(this));this.eventInput.on("touchcancel",h.bind(this));this.eventInput.on("unpipe",u.bind(this))}c.prototype.track=function p(t){this.touchHistory[t.identifier]=[t]};e.exports=c});define("famous/events/EventMapper",["require","exports","module","famous/core/EventHandler"],function(t,i,e){var n=t("famous/core/EventHandler");function s(t){n.call(this);this._mappingFunction=t}s.prototype=Object.create(n.prototype);s.prototype.constructor=s;s.prototype.subscribe=null;s.prototype.unsubscribe=null;s.prototype.emit=function r(t,i){var e=this._mappingFunction.apply(this,arguments);if(e&&e.emit instanceof Function)e.emit(t,i)};s.prototype.trigger=s.prototype.emit;e.exports=s});define("famous/views/FlexibleLayout",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/OptionsManager","famous/core/EventHandler","famous/transitions/Transitionable"],function(t,i,e){var n=t("famous/core/Entity");var s=t("famous/core/Transform");var r=t("famous/core/OptionsManager");var o=t("famous/core/EventHandler");var a=t("famous/transitions/Transitionable");function h(t){this.options=Object.create(h.DEFAULT_OPTIONS);this.optionsManager=new r(this.options);if(t)this.setOptions(t);this.id=n.register(this);this._ratios=new a(this.options.ratios);this._nodes=[];this._cachedDirection=null;this._cachedTotalLength=false;this._cachedLengths=[];this._cachedTransforms=null;this._ratiosDirty=false;this._eventOutput=new o;o.setOutputHandler(this,this._eventOutput)}h.DIRECTION_X=0;h.DIRECTION_Y=1;h.DEFAULT_OPTIONS={direction:h.DIRECTION_X,transition:false,ratios:[]};function u(t,i,e){var n;var r=0;var o=i;var a=0;var u;var c;var p;this._cachedLengths=[];this._cachedTransforms=[];for(p=0;p<t.length;p++){u=t[p];c=this._nodes[p];if(typeof u!=="number")o-=c.getSize()[e]||0;else a+=u}for(p=0;p<t.length;p++){c=this._nodes[p];u=t[p];i=typeof u==="number"?o*u/a:c.getSize()[e];n=e===h.DIRECTION_X?s.translate(r,0,0):s.translate(0,r,0);this._cachedTransforms.push(n);this._cachedLengths.push(i);r+=i}}h.prototype.render=function c(){return this.id};h.prototype.setOptions=function p(t){this.optionsManager.setOptions(t)};h.prototype.sequenceFrom=function l(t){this._nodes=t;if(this._ratios.get().length===0){var i=[];for(var e=0;e<this._nodes.length;e++)i.push(1);this.setRatios(i)}};h.prototype.setRatios=function f(t,i,e){if(i===undefined)i=this.options.transition;var n=this._ratios;if(n.get().length===0)i=undefined;if(n.isActive())n.halt();n.set(t,i,e);this._ratiosDirty=true};h.prototype.commit=function d(t){var i=t.size;var e=t.transform;var n=t.origin;var r=this._ratios.get();var o=this.options.direction;var a=i[o];var h;if(a!==this._cachedTotalLength||this._ratiosDirty||this._ratios.isActive()||o!==this._cachedDirection){u.call(this,r,a,o);if(a!==this._cachedTotalLength)this._cachedTotalLength=a;if(o!==this._cachedDirection)this._cachedDirection=o;if(this._ratiosDirty)this._ratiosDirty=false}var c=[];for(var p=0;p<r.length;p++){h=[undefined,undefined];a=this._cachedLengths[p];h[o]=a;c.push({transform:this._cachedTransforms[p],size:h,target:this._nodes[p].render()})}if(i&&(n[0]!==0&&n[1]!==0))e=s.moveThen([-i[0]*n[0],-i[1]*n[1],0],e);return{transform:e,size:i,target:c}};e.exports=h});